import{r as e,t}from"./C_ZiLLQI.js";function n(n){let i=n;return async n=>{let a=[],o=[];e(n,e=>{let t=e;if(![`pre`,`code`].includes(t.tagName))return!1;let n=t.properties?.language!==void 0&&t.properties?.language!==`text`,r=!!t.properties?.highlights;return n||r},e=>{let n=e,r=typeof n.properties.highlights==`string`?n.properties.highlights.split(/[,\s]+/).map(Number):Array.isArray(n.properties.highlights)?n.properties.highlights.map(Number):[],s=i.highlighter(t(e),n.properties.language,i.theme,{highlights:r.filter(Boolean),meta:n.properties.meta}).then(({tree:e,className:t,style:r,inlineStyle:i})=>{n.properties.className=((n.properties.className||``)+` `+t).trim(),n.properties.style=((n.properties.style||``)+` `+i).trim(),n.children[0]?.tagName===`code`?n.children[0].children=e:n.children=e[0].children||e,r&&o.push(r)});a.push(s)}),a.length&&(await Promise.all(a),n.children.push({type:`element`,tagName:`style`,children:[{type:`text`,value:r(o.join(``))}],properties:{}}))}}var r=e=>{let t=e.split(`}`).filter(e=>!!e.trim()).map(e=>e.trim()+`}`);return Array.from(new Set(t)).join(``)};export{n as t};
//# sourceMappingURL=BpfTpTp4.js.map