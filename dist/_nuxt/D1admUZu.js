import"./XrRa3LO0.js";import"./B4R0nvBE.js";import"./-4LthkDL.js";import"./0gl239Bx.js";import"./Bo70QARZ.js";import{Ca as e,Ea as t,Ga as n,Ia as r,Ja as i,La as a,M as o,Na as s,Ni as c,P as l,So as u,Tt as d,Xt as f,cn as p,dn as m,ea as h,eo as g,ir as _,ka as v,m as y,no as b,oi as x,qa as S,so as C,to as w,uo as T,xa as E,xo as D,yo as O}from"#entry";import"./CKe8ToaS.js";import"./DyDKH_mR.js";import{t as k}from"./CodoqrAY.js";import"./B_HPZwFe.js";import"./VeSnrGk5.js";import{n as A,t as j}from"./CrU1sBWz.js";var M={__name:`UContentSearch`,props:r({icon:{type:String,required:!1},placeholder:{type:null,required:!1},autofocus:{type:Boolean,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:String,required:!1},close:{type:[Boolean,Object],required:!1,default:!0},closeIcon:{type:String,required:!1},shortcut:{type:String,required:!1,default:`meta_k`},links:{type:Array,required:!1},navigation:{type:Array,required:!1},groups:{type:Array,required:!1},files:{type:Array,required:!1},fuse:{type:Object,required:!1},colorMode:{type:Boolean,required:!1,default:!0},class:{type:null,required:!1},ui:{type:void 0,required:!1}},{searchTerm:{type:String,default:``},searchTermModifiers:{}}),emits:[`update:searchTerm`],setup(r,{expose:M}){let N=r,P=w(),F=g(r,`searchTerm`,{type:String,default:``}),{t:I}=o(),{open:L}=l(),R=d(),z=c(),B=x(_(N,`icon`,`placeholder`,`autofocus`,`loading`,`loadingIcon`,`close`,`closeIcon`)),V=p(P,[`content`]),H=E(()=>h({},N.fuse,{fuseOptions:{includeMatches:!0}})),U=E(()=>m({extend:m(k),...z.uiPro?.contentSearch||{}})());function W(e){return e.flatMap(e=>[{...e,suffix:e.description,icon:e.icon||z.ui.icons.file},...e.children?.map(t=>({...t,prefix:e.label+` >`,suffix:t.description,icon:t.icon||e.icon||z.ui.icons.file}))||[]])}function G(e,t){return e.flatMap(e=>e.children?.length?G(e.children,e):N.files?.filter(t=>t.id===e.path||t.id.startsWith(`${e.path}#`))?.map(n=>K(n,e,t))||[])}function K(e,t,n){let r=[...new Set([n?.title,...e.titles].filter(Boolean))];return{prefix:r?.length?r.join(` > `)+` >`:void 0,label:e.id===t.path?t.title:e.title,suffix:e.content.replaceAll(`<`,`&lt;`).replaceAll(`>`,`&gt;`),to:e.id,icon:t.icon||n?.icon||(e.level>1?z.ui.icons.hash:z.ui.icons.file),level:e.level}}let q=E(()=>{let e=[];return N.links?.length&&e.push({id:`links`,label:I(`contentSearch.links`),items:W(N.links)}),N.navigation?.length&&(N.navigation.some(e=>!!e.children?.length)?e.push(...N.navigation.map(e=>({id:e.path,label:e.title,items:G(e.children||[]),postFilter:J}))):e.push({id:`docs`,items:G(N.navigation),postFilter:J})),e.push(...N.groups||[]),N.colorMode&&!R?.forced&&e.push({id:`theme`,label:I(`contentSearch.theme`),items:[{label:I(`colorMode.system`),icon:z.ui.icons.system,active:R.preference===`system`,onSelect:()=>{R.preference=`system`}},{label:I(`colorMode.light`),icon:z.ui.icons.light,active:R.preference===`light`,onSelect:()=>{R.preference=`light`}},{label:I(`colorMode.dark`),icon:z.ui.icons.dark,active:R.preference===`dark`,onSelect:()=>{R.preference=`dark`}}]}),e});function J(e,t){return e?t:t?.filter(e=>e.level===1)}function Y(e){e.disabled||(L.value=!1,F.value=``)}j({[N.shortcut]:{usingInput:!0,handler:()=>L.value=!L.value}});let X=b(`commandPaletteRef`);return M({commandPaletteRef:X}),(r,o)=>(n(),e(y,{open:O(L),"onUpdate:open":o[2]||=e=>T(L)?L.value=e:null,title:O(I)(`contentSearch.title`),description:O(I)(`contentSearch.description`),class:D(U.value.modal({class:[N.ui?.modal,N.class]}))},{content:C(()=>[i(r.$slots,`content`,{},()=>[v(A,a({ref_key:`commandPaletteRef`,ref:X,"search-term":F.value,"onUpdate:searchTerm":o[0]||=e=>F.value=e},O(B),{groups:q.value,fuse:H.value,ui:O(f)(O(p)(U.value,[`modal`]),N.ui),"onUpdate:modelValue":Y,"onUpdate:open":o[1]||=e=>L.value=e}),t({_:2},[S(O(V),(e,t)=>({name:t,fn:C(e=>[i(r.$slots,t,u(s(e)))])}))]),1040,[`search-term`,`groups`,`fuse`,`ui`])])]),_:3},8,[`open`,`title`,`description`,`class`]))}};export{M as default};
//# sourceMappingURL=D1admUZu.js.map