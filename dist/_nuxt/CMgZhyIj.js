import"./XrRa3LO0.js";import{a as e,c as t,d as n,f as r,i as ee,l as te,m as i,n as ne,o as a,p as re,r as ie,s as o,t as ae,u as oe}from"./C26Vr7SN.js";import"./B4R0nvBE.js";import"./-4LthkDL.js";import"./0gl239Bx.js";import{a as se,i as ce,n as le,r as ue,t as de}from"./9g_i9532.js";import{An as s,Bt as c,Ca as l,Cn as u,Dn as fe,En as d,Ga as f,Ha as pe,Hn as me,Ia as p,Ja as m,La as h,Na as he,Ni as ge,Oa as g,On as _,Ra as _e,Sa as v,So as ve,Ta as y,Vn as ye,Wi as be,_a as b,_n as x,ai as xe,dr as Se,ea as S,eo as Ce,fr as we,go as C,ha as w,ho as Te,ir as Ee,ka as T,kn as De,ma as E,po as Oe,qa as D,so as O,to as ke,wa as k,wo as A,xa as j,xo as M,yn as Ae,yo as N,zt as je}from"#entry";import{t as Me}from"./DYEki-UG.js";var P=Object.assign({inheritAttrs:!1},{__name:`UInputMenu`,props:p({as:{type:null,required:!1},id:{type:String,required:!1},type:{type:null,required:!1,default:`text`},placeholder:{type:String,required:!1},color:{type:null,required:!1},variant:{type:null,required:!1},size:{type:null,required:!1},required:{type:Boolean,required:!1},autofocus:{type:Boolean,required:!1},autofocusDelay:{type:Number,required:!1,default:0},trailingIcon:{type:String,required:!1},selectedIcon:{type:String,required:!1},deleteIcon:{type:String,required:!1},content:{type:Object,required:!1},arrow:{type:[Boolean,Object],required:!1},portal:{type:[Boolean,String],required:!1,skipCheck:!0,default:!0},valueKey:{type:null,required:!1},labelKey:{type:null,required:!1,default:`label`},items:{type:null,required:!1},defaultValue:{type:null,required:!1},modelValue:{type:null,required:!1},multiple:{type:Boolean,required:!1},highlight:{type:Boolean,required:!1},createItem:{type:[Boolean,String,Object],required:!1},filterFields:{type:Array,required:!1},ignoreFilter:{type:Boolean,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},open:{type:Boolean,required:!1},defaultOpen:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},name:{type:String,required:!1},resetSearchTermOnBlur:{type:Boolean,required:!1,default:!0},resetSearchTermOnSelect:{type:Boolean,required:!1,default:!0},highlightOnHover:{type:Boolean,required:!1},openOnClick:{type:Boolean,required:!1},openOnFocus:{type:Boolean,required:!1},icon:{type:String,required:!1},avatar:{type:Object,required:!1},leading:{type:Boolean,required:!1},leadingIcon:{type:String,required:!1},trailing:{type:Boolean,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:String,required:!1}},{searchTerm:{type:String,default:``},searchTermModifiers:{}}),emits:p([`update:open`,`change`,`blur`,`focus`,`create`,`highlight`,`remove-tag`,`update:modelValue`],[`update:searchTerm`]),setup(p,{expose:P,emit:Ne}){let F=p,I=Ne,L=ke(),R=Ce(p,`searchTerm`,{type:String,default:``}),{t:z}=c(),B=ge(),{contains:V}=i({sensitivity:`base`}),Pe=xe(Ee(F,`as`,`modelValue`,`defaultValue`,`open`,`defaultOpen`,`required`,`multiple`,`resetSearchTermOnBlur`,`resetSearchTermOnSelect`,`highlightOnHover`,`openOnClick`,`openOnFocus`),I),Fe=je(C(()=>F.portal)),Ie=C(()=>S(F.content,{side:`bottom`,sideOffset:8,collisionPadding:8,position:`popper`})),Le=C(()=>F.arrow),{emitFormBlur:H,emitFormFocus:U,emitFormChange:Re,emitFormInput:ze,size:Be,color:Ve,id:W,name:He,highlight:Ue,disabled:G,ariaAttrs:K}=ye(F),{orientation:We,size:Ge}=Se(F),{isLeading:q,isTrailing:J,leadingIconName:Ke,trailingIconName:qe}=we(C(()=>S(F,{trailingIcon:B.ui.icons.chevronDown}))),Je=j(()=>Ge.value||Be.value),[Ye,Xe]=me(),Y=j(()=>d({extend:d(Me),...B.ui?.inputMenu||{}})({color:Ve.value,variant:F.variant,size:Je?.value,loading:F.loading,highlight:Ue.value,leading:q.value||!!F.avatar||!!L.leading,trailing:J.value||!!L.trailing,multiple:F.multiple,buttonGroup:We.value}));function Ze(e){return De(Qe.value,e,{labelKey:F.labelKey,valueKey:F.valueKey})??``}let X=j(()=>F.items?.length?s(F.items)?F.items:[F.items]:[]),Qe=j(()=>X.value.flatMap(e=>e)),$e=j(()=>{if(F.ignoreFilter||!R.value)return X.value;let e=Array.isArray(F.filterFields)?F.filterFields:[F.labelKey];return X.value.map(t=>t.filter(t=>t==null?!1:typeof t==`object`?t.type&&[`label`,`separator`].includes(t.type)?!0:e.some(e=>{let n=_(t,e);return n!=null&&V(String(n),R.value)}):V(String(t),R.value))).filter(e=>e.filter(e=>!$(e)||!e.type||![`label`,`separator`].includes(e.type)).length>0)}),Z=j(()=>$e.value.flatMap(e=>e)),et=j(()=>{if(!F.createItem||!R.value)return!1;let e=F.valueKey?{[F.valueKey]:R.value}:R.value;return typeof F.createItem==`object`&&F.createItem.when===`always`||F.createItem===`always`?!Z.value.find(t=>fe(t,e,F.valueKey)):!Z.value.length}),tt=j(()=>typeof F.createItem==`object`?F.createItem.position:`bottom`),Q=Oe(null);function nt(){F.autofocus&&Q.value?.$el?.focus()}pe(()=>{_e(()=>{R.value=``}),setTimeout(()=>{nt()},F.autofocusDelay)});function rt(e){if(Te(F.modelValue)===e)return;let t=new Event(`change`,{target:{value:e}});I(`change`,t),Re(),ze(),F.resetSearchTermOnSelect&&(R.value=``)}function it(e){I(`blur`,e),H()}function at(e){I(`focus`,e),U()}function ot(e){let t;if(e){let e=new FocusEvent(`focus`);I(`focus`,e),U(),clearTimeout(t)}else{let e=new FocusEvent(`blur`);I(`blur`,e),H(),F.resetSearchTermOnBlur&&(t=setTimeout(()=>{R.value=``},100))}}function st(e){if(F.multiple){let t=F.modelValue.filter(t=>!be(t,e));I(`update:modelValue`,t),I(`remove-tag`,e),rt(t)}}function ct(e,t){if($(t)){if(t.disabled){e.preventDefault();return}t.onSelect?.(e)}}function $(e){return typeof e==`object`&&!!e}return P({inputRef:Q}),(i,s)=>(f(),y(b,null,[T(N(Ye),null,{default:O(()=>[T(N(t),{class:M(Y.value.group({class:F.ui?.group}))},{default:O(()=>[T(N(a),{class:M(Y.value.item({class:F.ui?.item})),value:R.value,onSelect:s[0]||=w(e=>I(`create`,R.value),[`prevent`])},{default:O(()=>[v(`span`,{class:M(Y.value.itemLabel({class:F.ui?.itemLabel}))},[m(i.$slots,`create-item-label`,{item:R.value},()=>[g(A(N(z)(`inputMenu.create`,{label:R.value})),1)])],2)]),_:3},8,[`class`,`value`])]),_:3},8,[`class`])]),_:3}),T(N(r),h(N(Pe),{name:N(He),disabled:N(G),class:Y.value.root({class:[F.ui?.root,F.class]}),"as-child":!!p.multiple,"ignore-filter":``,"onUpdate:modelValue":rt,"onUpdate:open":ot,onKeydown:s[5]||=E(e=>e.preventDefault(),[`enter`])}),{default:O(({modelValue:r,open:c})=>[T(N(re),{"as-child":!p.multiple,class:M(Y.value.base({class:F.ui?.base}))},{default:O(()=>[p.multiple?(f(),l(N(se),{key:0,"model-value":r,disabled:N(G),required:p.required,delimiter:``,"as-child":``,onBlur:it,onFocus:at,onRemoveTag:st},{default:O(({modelValue:e})=>[(f(!0),y(b,null,D(e,(e,t)=>(f(),l(N(ue),{key:t,value:e,class:M(Y.value.tagsItem({class:[F.ui?.tagsItem,$(e)&&e.ui?.tagsItem]}))},{default:O(()=>[T(N(de),{class:M(Y.value.tagsItemText({class:[F.ui?.tagsItemText,$(e)&&e.ui?.tagsItemText]}))},{default:O(()=>[m(i.$slots,`tags-item-text`,{item:e,index:t},()=>[g(A(Ze(e)),1)])]),_:2},1032,[`class`]),T(N(le),{class:M(Y.value.tagsItemDelete({class:[F.ui?.tagsItemDelete,$(e)&&e.ui?.tagsItemDelete]})),disabled:N(G)},{default:O(()=>[m(i.$slots,`tags-item-delete`,{item:e,index:t},()=>[T(u,{name:p.deleteIcon||N(B).ui.icons.close,class:M(Y.value.tagsItemDeleteIcon({class:[F.ui?.tagsItemDeleteIcon,$(e)&&e.ui?.tagsItemDeleteIcon]}))},null,8,[`name`,`class`])])]),_:2},1032,[`class`,`disabled`])]),_:2},1032,[`value`,`class`]))),128)),T(N(o),{modelValue:R.value,"onUpdate:modelValue":s[2]||=e=>R.value=e,"as-child":``},{default:O(()=>[T(N(ce),h({id:N(W),ref_key:`inputRef`,ref:Q},{...i.$attrs,...N(K)},{placeholder:p.placeholder,class:Y.value.tagsInput({class:F.ui?.tagsInput}),onKeydown:s[1]||=E(w(()=>{},[`prevent`]),[`enter`])}),null,16,[`id`,`placeholder`,`class`])]),_:1},8,[`modelValue`])]),_:3},8,[`model-value`,`disabled`,`required`])):(f(),l(N(o),h({key:1,id:N(W),ref_key:`inputRef`,ref:Q,"display-value":Ze},{...i.$attrs,...N(K)},{type:p.type,placeholder:p.placeholder,required:p.required,onBlur:it,onFocus:at,"onUpdate:modelValue":s[3]||=e=>R.value=e}),null,16,[`id`,`type`,`placeholder`,`required`])),N(q)||p.avatar||L.leading?(f(),y(`span`,{key:2,class:M(Y.value.leading({class:F.ui?.leading}))},[m(i.$slots,`leading`,{modelValue:r,open:c,ui:Y.value},()=>[N(q)&&N(Ke)?(f(),l(u,{key:0,name:N(Ke),class:M(Y.value.leadingIcon({class:F.ui?.leadingIcon}))},null,8,[`name`,`class`])):p.avatar?(f(),l(x,h({key:1,size:F.ui?.itemLeadingAvatarSize||Y.value.itemLeadingAvatarSize()},p.avatar,{class:Y.value.itemLeadingAvatar({class:F.ui?.itemLeadingAvatar})}),null,16,[`size`,`class`])):k(``,!0)])],2)):k(``,!0),N(J)||L.trailing?(f(),l(N(ae),{key:3,class:M(Y.value.trailing({class:F.ui?.trailing}))},{default:O(()=>[m(i.$slots,`trailing`,{modelValue:r,open:c,ui:Y.value},()=>[N(qe)?(f(),l(u,{key:0,name:N(qe),class:M(Y.value.trailingIcon({class:F.ui?.trailingIcon}))},null,8,[`name`,`class`])):k(``,!0)])]),_:2},1032,[`class`])):k(``,!0)]),_:2},1032,[`as-child`,`class`]),T(N(ie),ve(he(N(Fe))),{default:O(()=>[T(N(oe),h({class:Y.value.content({class:F.ui?.content})},Ie.value,{onFocusOutside:s[4]||=w(()=>{},[`prevent`])}),{default:O(()=>[m(i.$slots,`content-top`),T(N(te),{class:M(Y.value.empty({class:F.ui?.empty}))},{default:O(()=>[m(i.$slots,`empty`,{searchTerm:R.value},()=>[g(A(R.value?N(z)(`inputMenu.noMatch`,{searchTerm:R.value}):N(z)(`inputMenu.noData`)),1)])]),_:3},8,[`class`]),v(`div`,{role:`presentation`,class:M(Y.value.viewport({class:F.ui?.viewport}))},[et.value&&tt.value===`top`?(f(),l(N(Xe),{key:0})):k(``,!0),(f(!0),y(b,null,D($e.value,(n,r)=>(f(),l(N(t),{key:`group-${r}`,class:M(Y.value.group({class:F.ui?.group}))},{default:O(()=>[(f(!0),y(b,null,D(n,(t,n)=>(f(),y(b,{key:`group-${r}-${n}`},[$(t)&&t.type===`label`?(f(),l(N(ee),{key:0,class:M(Y.value.label({class:[F.ui?.label,t.ui?.label,t.class]}))},{default:O(()=>[g(A(N(_)(t,F.labelKey)),1)]),_:2},1032,[`class`])):$(t)&&t.type===`separator`?(f(),l(N(ne),{key:1,class:M(Y.value.separator({class:[F.ui?.separator,t.ui?.separator,t.class]}))},null,8,[`class`])):(f(),l(N(a),{key:2,class:M(Y.value.item({class:[F.ui?.item,$(t)&&t.ui?.item,$(t)&&t.class]})),disabled:$(t)&&t.disabled,value:F.valueKey&&$(t)?N(_)(t,F.valueKey):t,onSelect:e=>ct(e,t)},{default:O(()=>[m(i.$slots,`item`,{item:t,index:n},()=>[m(i.$slots,`item-leading`,{item:t,index:n},()=>[$(t)&&t.icon?(f(),l(u,{key:0,name:t.icon,class:M(Y.value.itemLeadingIcon({class:[F.ui?.itemLeadingIcon,t.ui?.itemLeadingIcon]}))},null,8,[`name`,`class`])):$(t)&&t.avatar?(f(),l(x,h({key:1,size:t.ui?.itemLeadingAvatarSize||F.ui?.itemLeadingAvatarSize||Y.value.itemLeadingAvatarSize()},{ref_for:!0},t.avatar,{class:Y.value.itemLeadingAvatar({class:[F.ui?.itemLeadingAvatar,t.ui?.itemLeadingAvatar]})}),null,16,[`size`,`class`])):$(t)&&t.chip?(f(),l(Ae,h({key:2,size:t.ui?.itemLeadingChipSize||F.ui?.itemLeadingChipSize||Y.value.itemLeadingChipSize(),inset:``,standalone:``},{ref_for:!0},t.chip,{class:Y.value.itemLeadingChip({class:[F.ui?.itemLeadingChip,t.ui?.itemLeadingChip]})}),null,16,[`size`,`class`])):k(``,!0)]),v(`span`,{class:M(Y.value.itemLabel({class:[F.ui?.itemLabel,$(t)&&t.ui?.itemLabel]}))},[m(i.$slots,`item-label`,{item:t,index:n},()=>[g(A($(t)?N(_)(t,F.labelKey):t),1)])],2),v(`span`,{class:M(Y.value.itemTrailing({class:[F.ui?.itemTrailing,$(t)&&t.ui?.itemTrailing]}))},[m(i.$slots,`item-trailing`,{item:t,index:n}),T(N(e),{"as-child":``},{default:O(()=>[T(u,{name:p.selectedIcon||N(B).ui.icons.check,class:M(Y.value.itemTrailingIcon({class:[F.ui?.itemTrailingIcon,$(t)&&t.ui?.itemTrailingIcon]}))},null,8,[`name`,`class`])]),_:2},1024)],2)])]),_:2},1032,[`class`,`disabled`,`value`,`onSelect`]))],64))),128))]),_:2},1032,[`class`]))),128)),et.value&&tt.value===`bottom`?(f(),l(N(Xe),{key:1})):k(``,!0)],2),m(i.$slots,`content-bottom`),p.arrow?(f(),l(N(n),h({key:0},Le.value,{class:Y.value.arrow({class:F.ui?.arrow})}),null,16,[`class`])):k(``,!0)]),_:3},16,[`class`])]),_:3},16)]),_:3},16,[`name`,`disabled`,`class`,`as-child`])],64))}});export{P as default};
//# sourceMappingURL=CMgZhyIj.js.map