import{Aa as e,Dt as t,Ma as n,Ot as r,Pa as i,Ya as a,do as o,ga as s,ho as c,ja as l,la as u,ro as d,xa as f,ya as p}from"#entry";import{r as m,t as h}from"./BpRXZuPS.js";import{t as g}from"./CY_dl_HE.js";import{n as _,o as v}from"./B89OoJR8.js";function y(e,t){return t.reduce((t,n)=>{let r=b(e,n);return r!==void 0&&(t[n]=r),t},{})}function b(e,t){return t.split(`.`).reduce((e,t)=>e&&e[t],e)}var x=`default`,S=/^@|^v-on:/,C=/^:|^v-bind:/,w=/^v-model/,T=[`select`,`textarea`,`input`],E=[`math`,`svg`],D=Object.fromEntries(`p.a.blockquote.code.pre.code.em.h1.h2.h3.h4.h5.h6.hr.img.ul.ol.li.strong.table.thead.tbody.td.th.tr.script`.split(`.`).map(e=>[e,`prose-${e}`])),O=[`script`,`base`],k=l({name:`MDCRenderer`,props:{body:{type:Object,required:!0},data:{type:Object,default:()=>({})},class:{type:[String,Object],default:void 0},tag:{type:[String,Boolean],default:void 0},prose:{type:Boolean,default:void 0},components:{type:Object,default:()=>({})},unwrap:{type:[Boolean,String],default:!1}},async setup(e){let t=n()?.appContext?.app?.$nuxt,r=t?.$route||t?._route,{mdc:i}=t?.$config?.public||{},a=f(()=>({...i?.components?.prose&&e.prose!==!1?D:{},...i?.components?.map||{},...c(e.data?.mdc?.components||{}),...e.components})),s=f(()=>{let t=(e.body?.children||[]).map(e=>e.tag||e.type).filter(e=>!g.includes(e));return Array.from(new Set(t)).sort().join(`.`)}),l=o({...e.data});d(()=>e.data,e=>{Object.assign(l,e)}),await W(e.body,{tags:a.value});function u(e,t){let n=e.split(`.`).length-1;return e.split(`.`).reduce((e,r,i)=>i==n&&e?(e[r]=t,e[r]):typeof e==`object`?e[r]:void 0,l)}return{tags:a,contentKey:s,route:r,runtimeData:l,updateRuntimeData:u}},render(e){let{tags:t,tag:n,body:r,data:a,contentKey:o,route:s,unwrap:c,runtimeData:l,updateRuntimeData:u}=e;if(!r)return null;let d={...a,tags:t,$route:s,runtimeData:l,updateRuntimeData:u},f=n===!1?void 0:R(n||d.component?.name||d.component||`div`);return f?i(f,{...d.component?.props,class:e.class,...this.$attrs,key:o},{default:p}):p?.();function p(){let e=j(r,i,{documentMeta:d,parentScope:d,resolveComponent:R});return e?.default?c?_(e.default(),typeof c==`string`?c.split(` `):[`*`]):e.default():null}}});function A(e,t,n,r){let{documentMeta:i,parentScope:a,resolveComponent:o}=n;if(e.type===`text`)return t(p,e.value);if(e.type===`comment`)return t(s,null,e.value);let c=e.tag,l=G(e,i.tags);if(e.tag===`binding`)return M(e,t,i,a);let u=H(l)?e=>e:o;if(O.includes(l))return t(`pre`,{class:`mdc-renderer-dangerous-tag`},`<`+l+`>`+v(e)+`</`+l+`>`);let d=u(l);typeof d==`object`&&(d.tag=c);let f=N(e,i);return r&&(f.key=r),t(d,f,j(e,t,{documentMeta:i,parentScope:{...a,...f},resolveComponent:u}))}function j(e,t,n){let{documentMeta:r,parentScope:i,resolveComponent:a}=n,o=(e.children||[]).reduce((e,t)=>{if(!V(t))return e[x].children.push(t),e;let n=B(t);return e[n]=e[n]||{props:{},children:[]},t.type===`element`&&(e[n].props=t.props,e[n].children.push(...t.children||[])),e},{[x]:{props:{},children:[]}});return Object.entries(o).reduce((e,[n,{props:o,children:s}])=>(s.length&&(e[n]=(e={})=>{let n=y(e,Object.keys(o||{})),c=s.map((e,o)=>A(e,t,{documentMeta:r,parentScope:{...i,...n},resolveComponent:a},String(e.props?.key||o)));return o?.unwrap&&(c=_(c,o.unwrap)),U(c)}),e),{})}function M(e,t,n,r={}){let i={...n.runtimeData,...r,$document:n,$doc:n},a=(e.props?.value.trim().split(/\.|\[(\d+)\]/).filter(Boolean)).reduce((e,t)=>{if(e&&t in e)return typeof e[t]==`function`?e[t]():e[t]},i),o=e.props?.defaultValue;return t(p,a??o??``)}function N(e,t){let{tag:n=``,props:r={}}=e;return Object.keys(r).reduce(function(e,i){if(i===`__ignoreMap`)return e;let a=r[i];if(w.test(i))return P(i,a,e,t,{native:T.includes(n)});if(i===`v-bind`)return F(i,a,e,t);if(S.test(i))return I(i,a,e,t);if(C.test(i))return L(i,a,e,t);let{attribute:o}=m(h,i);return Array.isArray(a)&&a.every(e=>typeof e==`string`)?(e[o]=a.join(` `),e):(e[o]=a,e)},{})}function P(e,t,n,r,{native:i}){let a=e.match(/^v-model:([^=]+)/)?.[1]||`modelValue`,o=i?`value`:a,s=i?`onInput`:`onUpdate:${a}`;return n[o]=z(t,r.runtimeData),n[s]=e=>{r.updateRuntimeData(t,i?e.target?.value:e)},n}function F(e,t,n,r){let i=z(t,r);return n=Object.assign(n,i),n}function I(e,t,n,r){return e=e.replace(S,``),n.on=n.on||{},n.on[e]=()=>z(t,r),n}function L(e,t,n,r){return e=e.replace(C,``),n[e]=z(t,r),n}var R=t=>{if(typeof t==`string`){if(g.includes(t))return t;let n=a(r(t),!1);return!t||n?.name===`AsyncComponentWrapper`||typeof n==`string`?n:`setup`in n?e(()=>new Promise(e=>e(n))):n}return t};function z(e,t){let n=e.split(`.`).reduce((e,t)=>typeof e==`object`?e[t]:void 0,t);return n===void 0?u(e):n}function B(e){let t=``;for(let n of Object.keys(e.props||{})){if(!n.startsWith(`#`)&&!n.startsWith(`v-slot:`))continue;t=n.split(/[:#]/,2)[1];break}return t||`default`}function V(e){return e.tag===`template`}function H(e){return E.includes(e)}function U(e){let t=[];for(let n of e){let e=t[t.length-1];n.type===p&&e?.type===p?e.children+=n.children:t.push(n)}return t}async function W(e,t){if(!e)return;let n=Array.from(new Set(r(e,t)));await Promise.all(n.map(async e=>{if(e?.render||e?.ssrRender||e?.__ssrInlineRender)return;let t=R(e);t?.__asyncLoader&&!t.__asyncResolved&&await t.__asyncLoader()}));function r(e,t){let n=e.tag;if(e.type===`text`||n===`binding`||e.type===`comment`)return[];let i=G(e,t.tags);if(H(i))return[];let a=[];e.type!==`root`&&!g.includes(i)&&a.push(i);for(let n of e.children||[])a.push(...r(n,t));return a}}function G(e,n){let i=e.tag;return!i||e.props?.__ignoreMap!==void 0?i:n[i]||n[r(i)]||n[t(e.tag)]||i}var K=Object.assign(k,{__name:`MDCRenderer`});export{K as t};
//# sourceMappingURL=CiS4aUr_.js.map