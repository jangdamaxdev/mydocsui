import{a as e,c as t,d as n,f as r,i as ee,l as te,m as i,n as ne,o as a,p as re,r as ie,s as ae,t as oe,u as se}from"./C26Vr7SN.js";import{An as o,Bt as s,Ca as c,Cn as l,Dn as ce,En as u,Ga as d,Ha as le,Hn as ue,Ia as f,Ir as de,Ja as p,La as m,Na as fe,Ni as pe,Oa as h,On as g,Sa as _,So as me,Ta as v,Vn as he,_a as y,_n as b,ai as ge,dr as _e,ea as x,eo as ve,fr as ye,go as S,ha as be,ho as xe,ir as Se,ka as C,kn as w,po as Ce,qa as T,so as E,to as we,wa as D,wo as O,xa as k,xo as A,yn as Te,yo as j,zt as Ee}from"#entry";import{t as De}from"./RY8z3lkP.js";import{t as Oe}from"./BQSwgocG.js";var M=Object.assign({inheritAttrs:!1},{__name:`USelectMenu`,props:f({id:{type:String,required:!1},placeholder:{type:String,required:!1},searchInput:{type:[Boolean,Object],required:!1,default:!0},color:{type:null,required:!1},variant:{type:null,required:!1},size:{type:null,required:!1},required:{type:Boolean,required:!1},trailingIcon:{type:String,required:!1},selectedIcon:{type:String,required:!1},content:{type:Object,required:!1},arrow:{type:[Boolean,Object],required:!1},portal:{type:[Boolean,String],required:!1,skipCheck:!0,default:!0},valueKey:{type:null,required:!1},labelKey:{type:null,required:!1,default:`label`},items:{type:null,required:!1},defaultValue:{type:null,required:!1},modelValue:{type:null,required:!1},multiple:{type:Boolean,required:!1},highlight:{type:Boolean,required:!1},createItem:{type:[Boolean,String,Object],required:!1},filterFields:{type:Array,required:!1},ignoreFilter:{type:Boolean,required:!1},autofocus:{type:Boolean,required:!1},autofocusDelay:{type:Number,required:!1,default:0},class:{type:null,required:!1},ui:{type:null,required:!1},open:{type:Boolean,required:!1},defaultOpen:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},name:{type:String,required:!1},resetSearchTermOnBlur:{type:Boolean,required:!1,default:!0},resetSearchTermOnSelect:{type:Boolean,required:!1,default:!0},highlightOnHover:{type:Boolean,required:!1},icon:{type:String,required:!1},avatar:{type:Object,required:!1},leading:{type:Boolean,required:!1},leadingIcon:{type:String,required:!1},trailing:{type:Boolean,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:String,required:!1}},{searchTerm:{type:String,default:``},searchTermModifiers:{}}),emits:f([`update:open`,`change`,`blur`,`focus`,`create`,`highlight`,`update:modelValue`],[`update:searchTerm`]),setup(f,{expose:M,emit:ke}){let N=f,P=ke,F=we(),I=ve(f,`searchTerm`,{type:String,default:``}),{t:L}=s(),R=pe(),{contains:z}=i({sensitivity:`base`}),Ae=ge(Se(N,`modelValue`,`defaultValue`,`open`,`defaultOpen`,`required`,`multiple`,`resetSearchTermOnBlur`,`resetSearchTermOnSelect`,`highlightOnHover`),P),je=Ee(S(()=>N.portal)),Me=S(()=>x(N.content,{side:`bottom`,sideOffset:8,collisionPadding:8,position:`popper`})),Ne=S(()=>N.arrow),Pe=S(()=>x(N.searchInput,{placeholder:L(`selectMenu.search`),variant:`none`})),{emitFormBlur:Fe,emitFormFocus:Ie,emitFormInput:Le,emitFormChange:Re,size:ze,color:Be,id:Ve,name:He,highlight:Ue,disabled:We,ariaAttrs:Ge}=he(N),{orientation:Ke,size:qe}=_e(N),{isLeading:B,isTrailing:V,leadingIconName:H,trailingIconName:U}=ye(S(()=>x(N,{trailingIcon:R.ui.icons.chevronDown}))),Je=k(()=>qe.value||ze.value),[Ye,W]=ue(),G=k(()=>u({extend:u(Oe),...R.ui?.selectMenu||{}})({color:Be.value,variant:N.variant,size:Je?.value,loading:N.loading,highlight:Ue.value,leading:B.value||!!N.avatar||!!F.leading,trailing:V.value||!!F.trailing,buttonGroup:Ke.value}));function Xe(e){if(N.multiple&&Array.isArray(e)){let t=e.map(e=>w(q.value,e,{labelKey:N.labelKey,valueKey:N.valueKey})).filter(e=>e!=null&&e!==``);return t.length>0?t.join(`, `):void 0}return w(q.value,e,{labelKey:N.labelKey,valueKey:N.valueKey})}let K=k(()=>N.items?.length?o(N.items)?N.items:[N.items]:[]),q=k(()=>K.value.flatMap(e=>e)),J=k(()=>{if(N.ignoreFilter||!I.value)return K.value;let e=Array.isArray(N.filterFields)?N.filterFields:[N.labelKey];return K.value.map(t=>t.filter(t=>t==null?!1:typeof t==`object`?t.type&&[`label`,`separator`].includes(t.type)?!0:e.some(e=>{let n=g(t,e);return n!=null&&z(String(n),I.value)}):z(String(t),I.value))).filter(e=>e.filter(e=>!$(e)||!e.type||![`label`,`separator`].includes(e.type)).length>0)}),Y=k(()=>J.value.flatMap(e=>e)),X=k(()=>{if(!N.createItem||!I.value)return!1;let e=N.valueKey?{[N.valueKey]:I.value}:I.value;return typeof N.createItem==`object`&&N.createItem.when===`always`||N.createItem===`always`?!Y.value.find(t=>ce(t,e,N.valueKey)):!Y.value.length}),Z=k(()=>typeof N.createItem==`object`?N.createItem.position:`bottom`),Q=Ce(null);function Ze(){N.autofocus&&Q.value?.$el?.focus({focusVisible:!0})}le(()=>{setTimeout(()=>{Ze()},N.autofocusDelay)});function Qe(e){if(xe(N.modelValue)===e)return;let t=new Event(`change`,{target:{value:e}});P(`change`,t),Re(),Le(),N.resetSearchTermOnSelect&&(I.value=``)}function $e(e){let t;if(e){let e=new FocusEvent(`focus`);P(`focus`,e),Ie(),clearTimeout(t)}else{let e=new FocusEvent(`blur`);P(`blur`,e),Fe(),N.resetSearchTermOnBlur&&(t=setTimeout(()=>{I.value=``},100))}}function et(e,t){if($(t)){if(t.disabled){e.preventDefault();return}t.onSelect?.(e)}}function $(e){return typeof e==`object`&&!!e}return M({triggerRef:Q}),(i,o)=>(d(),v(y,null,[C(j(Ye),null,{default:E(()=>[C(j(t),{class:A(G.value.group({class:N.ui?.group}))},{default:E(()=>[C(j(a),{class:A(G.value.item({class:N.ui?.item})),value:I.value,onSelect:o[0]||=be(e=>P(`create`,I.value),[`prevent`])},{default:E(()=>[_(`span`,{class:A(G.value.itemLabel({class:N.ui?.itemLabel}))},[p(i.$slots,`create-item-label`,{item:I.value},()=>[h(O(j(L)(`selectMenu.create`,{label:I.value})),1)])],2)]),_:3},8,[`class`,`value`])]),_:3},8,[`class`])]),_:3}),C(j(r),m({id:j(Ve)},{...j(Ae),...i.$attrs,...j(Ge)},{"ignore-filter":``,"as-child":``,name:j(He),disabled:j(We),"onUpdate:modelValue":Qe,"onUpdate:open":$e}),{default:E(({modelValue:r,open:s})=>[C(j(re),{"as-child":``},{default:E(()=>[C(j(oe),{ref_key:`triggerRef`,ref:Q,class:A(G.value.base({class:[N.ui?.base,N.class]})),tabindex:`0`},{default:E(()=>[j(B)||f.avatar||F.leading?(d(),v(`span`,{key:0,class:A(G.value.leading({class:N.ui?.leading}))},[p(i.$slots,`leading`,{modelValue:r,open:s,ui:G.value},()=>[j(B)&&j(H)?(d(),c(l,{key:0,name:j(H),class:A(G.value.leadingIcon({class:N.ui?.leadingIcon}))},null,8,[`name`,`class`])):f.avatar?(d(),c(b,m({key:1,size:N.ui?.itemLeadingAvatarSize||G.value.itemLeadingAvatarSize()},f.avatar,{class:G.value.itemLeadingAvatar({class:N.ui?.itemLeadingAvatar})}),null,16,[`size`,`class`])):D(``,!0)])],2)):D(``,!0),p(i.$slots,`default`,{modelValue:r,open:s},()=>[(d(!0),v(y,null,T([Xe(r)],e=>(d(),v(y,{key:e},[e==null?(d(),v(`span`,{key:1,class:A(G.value.placeholder({class:N.ui?.placeholder}))},O(f.placeholder??`\xA0`),3)):(d(),v(`span`,{key:0,class:A(G.value.value({class:N.ui?.value}))},O(e),3))],64))),128))]),j(V)||F.trailing?(d(),v(`span`,{key:1,class:A(G.value.trailing({class:N.ui?.trailing}))},[p(i.$slots,`trailing`,{modelValue:r,open:s,ui:G.value},()=>[j(U)?(d(),c(l,{key:0,name:j(U),class:A(G.value.trailingIcon({class:N.ui?.trailingIcon}))},null,8,[`name`,`class`])):D(``,!0)])],2)):D(``,!0)]),_:2},1032,[`class`])]),_:2},1024),C(j(ie),me(fe(j(je))),{default:E(()=>[C(j(se),m({class:G.value.content({class:N.ui?.content})},Me.value),{default:E(()=>[C(j(de),{trapped:``,class:A(G.value.focusScope({class:N.ui?.focusScope}))},{default:E(()=>[p(i.$slots,`content-top`),f.searchInput?(d(),c(j(ae),{key:0,modelValue:I.value,"onUpdate:modelValue":o[1]||=e=>I.value=e,"display-value":()=>I.value,"as-child":``},{default:E(()=>[C(De,m({autofocus:``,autocomplete:`off`,size:f.size},Pe.value,{class:G.value.input({class:N.ui?.input})}),null,16,[`size`,`class`])]),_:1},8,[`modelValue`,`display-value`])):D(``,!0),C(j(te),{class:A(G.value.empty({class:N.ui?.empty}))},{default:E(()=>[p(i.$slots,`empty`,{searchTerm:I.value},()=>[h(O(I.value?j(L)(`selectMenu.noMatch`,{searchTerm:I.value}):j(L)(`selectMenu.noData`)),1)])]),_:3},8,[`class`]),_(`div`,{role:`presentation`,class:A(G.value.viewport({class:N.ui?.viewport}))},[X.value&&Z.value===`top`?(d(),c(j(W),{key:0})):D(``,!0),(d(!0),v(y,null,T(J.value,(n,r)=>(d(),c(j(t),{key:`group-${r}`,class:A(G.value.group({class:N.ui?.group}))},{default:E(()=>[(d(!0),v(y,null,T(n,(t,n)=>(d(),v(y,{key:`group-${r}-${n}`},[$(t)&&t.type===`label`?(d(),c(j(ee),{key:0,class:A(G.value.label({class:[N.ui?.label,t.ui?.label,t.class]}))},{default:E(()=>[h(O(j(g)(t,N.labelKey)),1)]),_:2},1032,[`class`])):$(t)&&t.type===`separator`?(d(),c(j(ne),{key:1,class:A(G.value.separator({class:[N.ui?.separator,t.ui?.separator,t.class]}))},null,8,[`class`])):(d(),c(j(a),{key:2,class:A(G.value.item({class:[N.ui?.item,$(t)&&t.ui?.item,$(t)&&t.class]})),disabled:$(t)&&t.disabled,value:N.valueKey&&$(t)?j(g)(t,N.valueKey):t,onSelect:e=>et(e,t)},{default:E(()=>[p(i.$slots,`item`,{item:t,index:n},()=>[p(i.$slots,`item-leading`,{item:t,index:n},()=>[$(t)&&t.icon?(d(),c(l,{key:0,name:t.icon,class:A(G.value.itemLeadingIcon({class:[N.ui?.itemLeadingIcon,t.ui?.itemLeadingIcon]}))},null,8,[`name`,`class`])):$(t)&&t.avatar?(d(),c(b,m({key:1,size:t.ui?.itemLeadingAvatarSize||N.ui?.itemLeadingAvatarSize||G.value.itemLeadingAvatarSize()},{ref_for:!0},t.avatar,{class:G.value.itemLeadingAvatar({class:[N.ui?.itemLeadingAvatar,t.ui?.itemLeadingAvatar]})}),null,16,[`size`,`class`])):$(t)&&t.chip?(d(),c(Te,m({key:2,size:N.ui?.itemLeadingChipSize||G.value.itemLeadingChipSize(),inset:``,standalone:``},{ref_for:!0},t.chip,{class:G.value.itemLeadingChip({class:[N.ui?.itemLeadingChip,t.ui?.itemLeadingChip]})}),null,16,[`size`,`class`])):D(``,!0)]),_(`span`,{class:A(G.value.itemLabel({class:[N.ui?.itemLabel,$(t)&&t.ui?.itemLabel]}))},[p(i.$slots,`item-label`,{item:t,index:n},()=>[h(O($(t)?j(g)(t,N.labelKey):t),1)])],2),_(`span`,{class:A(G.value.itemTrailing({class:[N.ui?.itemTrailing,$(t)&&t.ui?.itemTrailing]}))},[p(i.$slots,`item-trailing`,{item:t,index:n}),C(j(e),{"as-child":``},{default:E(()=>[C(l,{name:f.selectedIcon||j(R).ui.icons.check,class:A(G.value.itemTrailingIcon({class:[N.ui?.itemTrailingIcon,$(t)&&t.ui?.itemTrailingIcon]}))},null,8,[`name`,`class`])]),_:2},1024)],2)])]),_:2},1032,[`class`,`disabled`,`value`,`onSelect`]))],64))),128))]),_:2},1032,[`class`]))),128)),X.value&&Z.value===`bottom`?(d(),c(j(W),{key:1})):D(``,!0)],2),p(i.$slots,`content-bottom`)]),_:3},8,[`class`]),f.arrow?(d(),c(j(n),m({key:0},Ne.value,{class:G.value.arrow({class:N.ui?.arrow})}),null,16,[`class`])):D(``,!0)]),_:3},16,[`class`])]),_:3},16)]),_:3},16,[`id`,`name`,`disabled`])],64))}});export{M as t};
//# sourceMappingURL=DEm8cjOn.js.map