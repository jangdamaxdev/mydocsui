import"./XrRa3LO0.js";import{n as e,t}from"./D_nWdEbW.js";import"./DesV42jm.js";import{Ca as n,Ga as r,Hn as i,La as a,Ni as o,Qt as s,Sa as c,Ta as l,Va as u,Xa as d,_a as f,dn as p,ka as m,po as h,qa as g,ro as _,so as v,to as y,wa as b,wo as x,xa as S,xo as C,yo as w}from"#entry";import"./DQjWIGWd.js";import{t as T}from"./C_KeT50r.js";import{t as E}from"./DKbxitqR.js";var D=Object.assign({inheritAttrs:!1},{__name:`ProseCodeTree`,props:{defaultValue:{type:String,required:!1},expandAll:{type:Boolean,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1}},setup(D){let O=D,k=y(),A=o(),[j,M]=i(),N=S(()=>p({extend:p(T),...A.uiPro?.prose?.codeTree||{}})()),P=h(O.defaultValue?{path:O.defaultValue}:void 0),F=h(),I=h(1),L=S(()=>(I.value,k.default?.()?.flatMap(B).filter(Boolean)||[])),R=S(()=>z(L.value));function z(e){let t=new Map,n=[];e.forEach(e=>{let r=e.label.split(`/`),i=``;r.forEach((e,a)=>{if(i=i?`${i}/${e}`:e,!t.has(i)){let o={label:e,path:i,...a<r.length-1&&{children:[]}};t.set(i,o),a===0?n.push(o):t.get(r.slice(0,a).join(`/`))?.children?.push(o)}})});let r=e=>e.sort((e,t)=>!!e.children==!!t.children?e.label.localeCompare(t.label):t.children?1:-1).map(e=>({...e,children:e.children&&r(e.children)}));return r(n)}function B(e,t){return typeof e.type==`symbol`?e.children?.map(B):{label:e.props?.filename||e.props?.label||`${t}`,icon:e.props?.icon,component:e}}let V=S(()=>{if(O.expandAll){let e=new Set;return L.value.forEach(t=>{let n=t.label.split(`/`);for(let t=1;t<n.length;t++)e.add(n.slice(0,t).join(`/`))}),Array.from(e)}let e=P.value?.path;if(!e)return[];let t=e.split(`/`);return t.map((e,n)=>t.slice(0,n+1).join(`/`))});return _(P,e=>{let t=L.value.find(t=>e?.path===t.label);t?.component&&(F.value=t)},{immediate:!0}),u(()=>I.value++),(i,o)=>(r(),l(f,null,[m(w(j),null,{default:v(({items:e,level:i})=>[(r(!0),l(f,null,g(e,(e,a)=>(r(),l(`li`,{key:`${i}-${a}`,class:C(i>0?N.value.itemWithChildren({class:O.ui?.itemWithChildren}):N.value.item({class:O.ui?.item}))},[m(w(t),{"as-child":``,level:i,value:e},{default:v(({isExpanded:t,isSelected:a})=>[c(`button`,{class:C(N.value.link({class:O.ui?.link,active:a}))},[e.children?.length?(r(),n(s,{key:0,name:t?w(A).ui.icons.folderOpen:w(A).ui.icons.folder,class:C(N.value.linkLeadingIcon({class:O.ui?.linkLeadingIcon}))},null,8,[`name`,`class`])):(r(),n(E,{key:1,filename:e.label,class:C(N.value.linkLeadingIcon({class:O.ui?.linkLeadingIcon}))},null,8,[`filename`,`class`])),c(`span`,{class:C(N.value.linkLabel({class:O.ui?.linkLabel}))},x(e.label),3),e.children?.length?(r(),l(`span`,{key:2,class:C(N.value.linkTrailing({class:O.ui?.linkTrailing}))},[m(s,{name:w(A).ui.icons.chevronDown,class:C(N.value.linkTrailingIcon({class:O.ui?.linkTrailingIcon}))},null,8,[`name`,`class`])],2)):b(``,!0)],2),e.children?.length&&t?(r(),l(`ul`,{key:0,class:C(N.value.listWithChildren({class:O.ui?.listWithChildren}))},[m(w(M),{items:e.children,level:i+1},null,8,[`items`,`level`])],2)):b(``,!0)]),_:2},1032,[`level`,`value`])],2))),128))]),_:1}),c(`div`,a(i.$attrs,{class:N.value.root({class:[O.ui?.root,O.class]})}),[m(w(e),{modelValue:P.value,"onUpdate:modelValue":o[0]||=e=>P.value=e,class:C(N.value.list({class:O.ui?.list})),items:R.value,"get-key":e=>e.path,"default-expanded":V.value},{default:v(()=>[m(w(M),{items:R.value,level:0},null,8,[`items`])]),_:1},8,[`modelValue`,`class`,`items`,`get-key`,`default-expanded`]),c(`div`,{class:C(N.value.content({class:O.ui?.content}))},[(r(),n(d(F.value?.component)))],2)],16)],64))}});export{D as default};
//# sourceMappingURL=BP_6dyZB.js.map