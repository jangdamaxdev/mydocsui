import{t as e}from"./B4R0nvBE.js";import{t}from"./-4LthkDL.js";import{Ca as n,Dr as r,Ei as i,Ga as a,Ha as o,Ja as s,La as c,Oa as l,Ra as u,Wi as d,Xr as f,_i as p,_o as m,bi as h,ja as g,ji as _,ka as v,li as y,ma as b,po as x,ri as S,si as C,so as w,wa as T,wo as E,xa as D,yo as O}from"#entry";var[k,A]=_(`TagsInputRoot`),j=g({__name:`TagsInputRoot`,props:{modelValue:{type:[Array,null],required:!1},defaultValue:{type:Array,required:!1,default:()=>[]},addOnPaste:{type:Boolean,required:!1},addOnTab:{type:Boolean,required:!1},addOnBlur:{type:Boolean,required:!1},duplicate:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},delimiter:{type:null,required:!1,default:`,`},dir:{type:String,required:!1},max:{type:Number,required:!1,default:0},id:{type:String,required:!1},convertValue:{type:Function,required:!1},displayValue:{type:Function,required:!1,default:e=>e.toString()},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:[`update:modelValue`,`invalid`,`addTag`,`removeTag`],setup(o,{emit:c}){let l=o,u=c,{addOnPaste:d,disabled:g,delimiter:_,max:b,id:S,dir:E,addOnBlur:k,addOnTab:j}=m(l),M=y(E),N=h(l,`modelValue`,u,{defaultValue:l.defaultValue,passive:!0,deep:!0}),{forwardRef:P,currentElement:F}=C(),{focused:I}=p(F),L=e(F),{getItems:R,CollectionSlot:z}=r({isProvider:!0}),B=x(),V=x(!1),H=D(()=>Array.isArray(N.value)?[...N.value]:[]);function U(e){if(e!==-1){let t=R().filter(e=>e.ref.dataset.disabled!==``);N.value=N.value.filter((t,n)=>n!==e),u(`removeTag`,t[e].value)}}return A({modelValue:N,onAddValue:e=>{let t=[...H.value],n=t.length>0&&typeof t[0]==`object`,r=t.length>0&&typeof l.defaultValue[0]==`object`;if((n||r)&&typeof l.convertValue!=`function`)throw Error("You must provide a `convertValue` function when using objects as values.");let i=l.convertValue?l.convertValue(e):e;if(t.length>=b.value&&b.value)return u(`invalid`,i),!1;if(l.duplicate)return N.value=[...t,i],u(`addTag`,i),!0;if(t.includes(i))V.value=!0;else return N.value=[...t,i],u(`addTag`,i),!0;return u(`invalid`,i),!1},onRemoveValue:U,onInputKeydown:e=>{let t=e.target,n=R().map(e=>e.ref).filter(e=>e.dataset.disabled!==``);if(!n.length)return;let r=n.at(-1);switch(e.key){case`Delete`:case`Backspace`:if(t.selectionStart!==0||t.selectionEnd!==0)break;if(B.value){let t=n.findIndex(e=>e===B.value);U(t),B.value=B.value===r?n.at(t-1):n.at(t+1),e.preventDefault()}else e.key===`Backspace`&&(B.value=r,e.preventDefault());break;case`Home`:case`End`:case`ArrowRight`:case`ArrowLeft`:{let a=e.key===`ArrowRight`&&M.value===`ltr`||e.key===`ArrowLeft`&&M.value===`rtl`,o=!a;if(t.selectionStart!==0||t.selectionEnd!==0)break;if(o&&!B.value)B.value=r,e.preventDefault();else if(a&&r&&B.value===r)B.value=void 0,e.preventDefault();else if(B.value){let t=i(e,B.value,void 0,{itemsArray:n,loop:!1,dir:M.value});t&&(B.value=t),e.preventDefault()}break}case`ArrowUp`:case`ArrowDown`:B.value&&e.preventDefault();break;default:B.value=void 0}},selectedElement:B,isInvalidInput:V,addOnPaste:d,addOnBlur:k,addOnTab:j,dir:M,disabled:g,delimiter:_,max:b,id:S,displayValue:l.displayValue}),(e,r)=>(a(),n(O(z),null,{default:w(()=>[v(O(f),{ref:O(P),dir:O(M),as:e.as,"as-child":e.asChild,"data-invalid":V.value?``:void 0,"data-disabled":O(g)?``:void 0,"data-focused":O(I)?``:void 0},{default:w(()=>[s(e.$slots,`default`,{modelValue:O(N)}),O(L)&&e.name?(a(),n(O(t),{key:0,name:e.name,value:O(N),required:e.required,disabled:O(g)},null,8,[`name`,`value`,`required`,`disabled`])):T(`v-if`,!0)]),_:3},8,[`dir`,`as`,`as-child`,`data-invalid`,`data-disabled`,`data-focused`])]),_:3}))}}),M=g({__name:`TagsInputInput`,props:{placeholder:{type:String,required:!1},autoFocus:{type:Boolean,required:!1},maxLength:{type:Number,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`input`}},setup(e){let t=e,r=k(),{forwardRef:i,currentElement:c}=C();function l(e){if(r.selectedElement.value=void 0,!r.addOnBlur.value)return;let t=e.target;t.value&&r.onAddValue(t.value)&&(t.value=``)}function d(e){r.addOnTab.value&&g(e)}let p=x(!1);function m(){p.value=!0}function h(){u(()=>{p.value=!1})}async function g(e){if(p.value||(await u(),e.defaultPrevented))return;let t=e.target;t.value&&(r.onAddValue(t.value)&&(t.value=``),e.preventDefault())}function _(e){if(r.isInvalidInput.value=!1,e.data===null)return;let t=r.delimiter.value;if(t===e.data||t instanceof RegExp&&t.test(e.data)){let n=e.target;n.value=n.value.replace(t,``),r.onAddValue(n.value)&&(n.value=``)}}function v(e){if(r.addOnPaste.value){e.preventDefault();let t=e.clipboardData;if(!t)return;let n=t.getData(`text`);r.delimiter.value?n.split(r.delimiter.value).forEach(e=>{r.onAddValue(e)}):r.onAddValue(n)}}return o(()=>{let e=c.value.nodeName===`INPUT`?c.value:c.value.querySelector(`input`);e&&setTimeout(()=>{t.autoFocus&&e?.focus()},1)}),(e,t)=>(a(),n(O(f),{id:O(r).id?.value,ref:O(i),type:`text`,autocomplete:`off`,autocorrect:`off`,autocapitalize:`off`,as:e.as,"as-child":e.asChild,maxlength:e.maxLength,placeholder:e.placeholder,disabled:O(r).disabled.value,"data-invalid":O(r).isInvalidInput.value?``:void 0,onInput:_,onKeydown:[b(g,[`enter`]),b(d,[`tab`]),O(r).onInputKeydown],onBlur:l,onCompositionstart:m,onCompositionend:h,onPaste:v},{default:w(()=>[s(e.$slots,`default`)]),_:3},8,[`id`,`as`,`as-child`,`maxlength`,`placeholder`,`disabled`,`data-invalid`,`onKeydown`]))}}),[N,P]=_(`TagsInputItem`),F=g({__name:`TagsInputItem`,props:{value:{type:[String,Object],required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){let t=e,{value:i}=m(t),o=k(),{forwardRef:c,currentElement:l}=C(),{CollectionItem:u}=r(),d=D(()=>o.selectedElement.value===l.value),p=D(()=>t.disabled||o.disabled.value),h=P({value:i,isSelected:d,disabled:p,textId:``,displayValue:D(()=>o.displayValue(i.value))});return(e,t)=>(a(),n(O(u),{value:O(i)},{default:w(()=>[v(O(f),{ref:O(c),as:e.as,"as-child":e.asChild,"aria-labelledby":O(h).textId,"aria-current":d.value,"data-disabled":p.value?``:void 0,"data-state":d.value?`active`:`inactive`},{default:w(()=>[s(e.$slots,`default`)]),_:3},8,[`as`,`as-child`,`aria-labelledby`,`aria-current`,`data-disabled`,`data-state`])]),_:3},8,[`value`]))}}),I=g({__name:`TagsInputItemDelete`,props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`button`}},setup(e){let t=e;C();let r=k(),i=N(),o=D(()=>i.disabled?.value||r.disabled.value);function l(){if(o.value)return;let e=r.modelValue.value.findIndex(e=>d(e,i.value.value));r.onRemoveValue(e)}return(e,r)=>(a(),n(O(f),c({tabindex:`-1`},t,{"aria-labelledby":O(i).textId,"aria-current":O(i).isSelected.value,"data-state":O(i).isSelected.value?`active`:`inactive`,"data-disabled":o.value?``:void 0,type:e.as===`button`?`button`:void 0,onClick:l}),{default:w(()=>[s(e.$slots,`default`)]),_:3},16,[`aria-labelledby`,`aria-current`,`data-state`,`data-disabled`,`type`]))}}),L=g({__name:`TagsInputItemText`,props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`span`}},setup(e){let t=e,r=N();return C(),r.textId||=S(void 0,`reka-tags-input-item-text`),(e,i)=>(a(),n(O(f),c(t,{id:O(r).textId}),{default:w(()=>[s(e.$slots,`default`,{},()=>[l(E(O(r).displayValue.value),1)])]),_:3},16,[`id`]))}});export{j as a,M as i,I as n,F as r,L as t};
//# sourceMappingURL=9g_i9532.js.map