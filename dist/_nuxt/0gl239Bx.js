import{t as e}from"./XrRa3LO0.js";import{t}from"./B4R0nvBE.js";import{t as n}from"./-4LthkDL.js";import{$r as r,Ca as i,Dr as a,Ga as o,Ha as s,Ja as c,La as l,Ra as u,Tr as d,Ua as f,Wi as p,Xr as m,Yr as h,_o as g,ao as _,bi as v,ha as y,ja as b,ji as x,ka as S,ki as C,li as ee,lo as w,ma as T,ni as te,po as E,ri as D,ro as ne,si as O,so as k,wa as A,wi as j,xa as M,xi as N,yo as P}from"#entry";function F(e,t,n){return e===void 0?!1:Array.isArray(e)?e.some(e=>I(e,t,n)):I(e,t,n)}function I(e,t,n){return e===void 0||t===void 0?!1:typeof e==`string`?e===t:typeof n==`function`?n(e,t):typeof n==`string`?e?.[n]===t?.[n]:p(e,t)}var[L,re]=x(`ListboxRoot`),R=b({__name:`ListboxRoot`,props:{modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},multiple:{type:Boolean,required:!1},orientation:{type:String,required:!1,default:`vertical`},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},selectionBehavior:{type:String,required:!1,default:`toggle`},highlightOnHover:{type:Boolean,required:!1},by:{type:[String,Function],required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:[`update:modelValue`,`highlight`,`entryFocus`,`leave`],setup(s,{expose:l,emit:f}){let p=s,_=f,{multiple:y,highlightOnHover:b,orientation:x,disabled:S,selectionBehavior:C,dir:w}=g(p),{getItems:T}=a({isProvider:!0}),{handleTypeaheadSearch:D}=r(),{primitiveElement:O,currentElement:j}=h(),M=te(),F=ee(w),L=t(j),R=E(),z=E(!1),B=E(!0),V=v(p,`modelValue`,_,{defaultValue:p.defaultValue??(y.value?[]:void 0),passive:p.modelValue===void 0,deep:!0});function H(e){if(z.value=!0,p.multiple){let t=Array.isArray(V.value)?[...V.value]:[],n=t.findIndex(t=>I(t,e,p.by));p.selectionBehavior===`toggle`?(n===-1?t.push(e):t.splice(n,1),V.value=t):(V.value=[e],R.value=e)}else p.selectionBehavior===`toggle`&&I(V.value,e,p.by)?V.value=void 0:V.value=e;setTimeout(()=>{z.value=!1},1)}let U=E(null),W=E(null),G=E(!1),K=E(!1),q=N(),J=N(),Y=N();function X(){return T().map(e=>e.ref).filter(e=>e.dataset.disabled!==``)}function Z(e,t=!0){if(!e)return;U.value=e,B.value&&U.value.focus(),t&&U.value.scrollIntoView({block:`nearest`});let n=T().find(t=>t.ref===e);_(`highlight`,n)}function ie(e){if(G.value)Y.trigger(e);else{let t=T().find(t=>I(t.value,e,p.by));t&&(U.value=t.ref,Z(t.ref))}}function ae(e){U.value&&U.value.isConnected&&(e.preventDefault(),e.stopPropagation(),K.value||U.value.click())}function oe(e){if(B.value){if(z.value=!0,G.value)J.trigger(e);else{let t=e.altKey||e.ctrlKey||e.metaKey;if(t&&e.key===`a`&&y.value){let t=T();V.value=[...t.map(e=>e.value)],e.preventDefault(),Z(t[t.length-1].ref)}else if(!t){let t=D(e.key,T());t&&Z(t)}}setTimeout(()=>{z.value=!1},1)}}function se(){K.value=!0}function ce(){u(()=>{K.value=!1})}function Q(){u(()=>{let e=new KeyboardEvent(`keydown`,{key:`PageUp`});ue(e)})}function $(e){let t=U.value;t?.isConnected&&(W.value=t),U.value=null,_(`leave`,e)}function le(e){let t=new CustomEvent(`listbox.entryFocus`,{bubbles:!1,cancelable:!0});if(e.currentTarget?.dispatchEvent(t),_(`entryFocus`,t),!t.defaultPrevented)if(W.value)Z(W.value);else{let e=X()?.[0];Z(e)}}function ue(e){let t=d(e,x.value,F.value);if(!t)return;let n=X();if(U.value){if(t===`last`)n.reverse();else if(t===`prev`||t===`next`){t===`prev`&&n.reverse();let e=n.indexOf(U.value);n=n.slice(e+1)}de(e,n[0])}if(n.length){let e=!U.value&&t===`prev`?n.length-1:0;Z(n[e])}if(G.value)return J.trigger(e)}function de(t,n){if(!(G.value||p.selectionBehavior!==`replace`||!y.value||!Array.isArray(V.value))&&!((t.altKey||t.ctrlKey||t.metaKey)&&!t.shiftKey)&&t.shiftKey){let r=T().filter(e=>e.ref.dataset.disabled!==``),i=r.find(e=>e.ref===n)?.value;if(t.key===M.END?i=r[r.length-1].value:t.key===M.HOME&&(i=r[0].value),!i||!R.value)return;V.value=e(r.map(e=>e.value),R.value,i)}}async function fe(e){if(await u(),G.value)q.trigger(e);else{let e=X(),t=e.find(e=>e.dataset.state===`checked`);t?Z(t):e.length&&Z(e[0])}}return ne(V,()=>{z.value||u(()=>{fe()})},{immediate:!0,deep:!0}),l({highlightedElement:U,highlightItem:ie,highlightFirstItem:Q,highlightSelected:fe,getItems:T}),re({modelValue:V,onValueChange:H,multiple:y,orientation:x,dir:F,disabled:S,highlightOnHover:b,highlightedElement:U,isVirtual:G,virtualFocusHook:q,virtualKeydownHook:J,virtualHighlightHook:Y,by:p.by,firstValue:R,selectionBehavior:C,focusable:B,onLeave:$,onEnter:le,changeHighlight:Z,onKeydownEnter:ae,onKeydownNavigation:ue,onKeydownTypeAhead:oe,onCompositionStart:se,onCompositionEnd:ce,highlightFirstItem:Q}),(e,t)=>(o(),i(P(m),{ref_key:`primitiveElement`,ref:O,as:e.as,"as-child":e.asChild,dir:P(F),"data-disabled":P(S)?``:void 0,onPointerleave:$,onFocusout:t[0]||=async e=>{let t=e.relatedTarget||e.target;await u(),U.value&&P(j)&&!P(j).contains(t)&&$(e)}},{default:k(()=>[c(e.$slots,`default`,{modelValue:P(V)}),P(L)&&e.name?(o(),i(P(n),{key:0,name:e.name,value:P(V),disabled:P(S),required:e.required},null,8,[`name`,`value`,`disabled`,`required`])):A(`v-if`,!0)]),_:3},8,[`as`,`as-child`,`dir`,`data-disabled`]))}}),z=b({__name:`ListboxContent`,props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){let{CollectionSlot:t}=a(),n=L(),r=j(!1,10);return(e,a)=>(o(),i(P(t),null,{default:k(()=>[S(P(m),{role:`listbox`,as:e.as,"as-child":e.asChild,tabindex:P(n).focusable.value?P(n).highlightedElement.value?`-1`:`0`:void 0,"aria-orientation":P(n).orientation.value,"aria-multiselectable":!!P(n).multiple.value,"data-orientation":P(n).orientation.value,onMousedown:a[0]||=y(e=>r.value=!0,[`left`]),onFocus:a[1]||=e=>{P(r)||P(n).onEnter(e)},onKeydown:[a[2]||=T(y(e=>{P(n).focusable.value&&P(n).onKeydownNavigation(e)},[`prevent`]),[`down`,`up`,`left`,`right`,`home`,`end`]),T(P(n).onKeydownEnter,[`enter`]),P(n).onKeydownTypeAhead]},{default:k(()=>[c(e.$slots,`default`)]),_:3},8,[`as`,`as-child`,`tabindex`,`aria-orientation`,`aria-multiselectable`,`data-orientation`,`onKeydown`])]),_:3}))}}),B=b({__name:`ListboxFilter`,props:{modelValue:{type:String,required:!1},autoFocus:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`input`}},emits:[`update:modelValue`],setup(e,{emit:t}){let n=e,r=v(n,`modelValue`,t,{defaultValue:``,passive:n.modelValue===void 0}),a=L(),{primitiveElement:l,currentElement:u}=h(),d=M(()=>n.disabled||a.disabled.value||!1),p=E();return _(()=>p.value=a.highlightedElement.value?.id),s(()=>{a.focusable.value=!1,setTimeout(()=>{n.autoFocus&&u.value?.focus()},1)}),f(()=>{a.focusable.value=!0}),(e,t)=>(o(),i(P(m),{ref_key:`primitiveElement`,ref:l,as:e.as,"as-child":e.asChild,value:P(r),disabled:d.value?``:void 0,"data-disabled":d.value?``:void 0,"aria-disabled":d.value??void 0,"aria-activedescendant":p.value,type:`text`,onKeydown:[T(y(P(a).onKeydownNavigation,[`prevent`]),[`down`,`up`,`home`,`end`]),T(P(a).onKeydownEnter,[`enter`])],onInput:t[0]||=e=>{r.value=e.target.value,P(a).highlightFirstItem()},onCompositionstart:P(a).onCompositionStart,onCompositionend:P(a).onCompositionEnd},{default:k(()=>[c(e.$slots,`default`,{modelValue:P(r)})]),_:3},8,[`as`,`as-child`,`value`,`disabled`,`data-disabled`,`aria-disabled`,`aria-activedescendant`,`onKeydown`,`onCompositionstart`,`onCompositionend`]))}}),[V,H]=x(`ListboxGroup`),U=b({__name:`ListboxGroup`,props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){let t=e,n=D(void 0,`reka-listbox-group`);return H({id:n}),(e,r)=>(o(),i(P(m),l({role:`group`},t,{"aria-labelledby":P(n)}),{default:k(()=>[c(e.$slots,`default`)]),_:3},16,[`aria-labelledby`]))}}),W=`listbox.select`,[G,K]=x(`ListboxItem`),q=b({__name:`ListboxItem`,props:{value:{type:null,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`div`}},emits:[`select`],setup(e,{emit:t}){let n=e,r=t,s=D(void 0,`reka-listbox-item`),{CollectionItem:u}=a(),{forwardRef:d,currentElement:f}=O(),p=L(),h=M(()=>f.value===p.highlightedElement.value),g=M(()=>F(p.modelValue.value,n.value,p.by)),_=M(()=>p.disabled.value||n.disabled);async function v(e){r(`select`,e),!e?.defaultPrevented&&!_.value&&e&&(p.onValueChange(n.value),p.changeHighlight(f.value))}function b(e){let t={originalEvent:e,value:n.value};C(W,v,t)}return K({isSelected:g}),(e,t)=>(o(),i(P(u),{value:e.value},{default:k(()=>[w([h.value,g.value],()=>S(P(m),l({id:P(s)},e.$attrs,{ref:P(d),role:`option`,tabindex:P(p).focusable.value?h.value?`0`:`-1`:-1,"aria-selected":g.value,as:e.as,"as-child":e.asChild,disabled:_.value?``:void 0,"data-disabled":_.value?``:void 0,"data-highlighted":h.value?``:void 0,"data-state":g.value?`checked`:`unchecked`,onClick:b,onKeydown:T(y(b,[`prevent`]),[`space`]),onPointermove:t[0]||=e=>{P(p).highlightedElement.value!==P(f)&&(P(p).highlightOnHover.value?P(p).changeHighlight(P(f),!1):P(p).focusable.value||P(p).changeHighlight(P(f),!1))}}),{default:k(()=>[c(e.$slots,`default`)]),_:3},16,[`id`,`tabindex`,`aria-selected`,`as`,`as-child`,`disabled`,`data-disabled`,`data-highlighted`,`data-state`,`onKeydown`]),t,1)]),_:3},8,[`value`]))}}),J=b({__name:`ListboxItemIndicator`,props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`span`}},setup(e){let t=e;O();let n=G();return(e,r)=>P(n).isSelected.value?(o(),i(P(m),l({key:0,"aria-hidden":`true`},t),{default:k(()=>[c(e.$slots,`default`)]),_:3},16)):A(`v-if`,!0)}});export{B as a,L as c,V as i,q as n,z as o,U as r,R as s,J as t};
//# sourceMappingURL=0gl239Bx.js.map