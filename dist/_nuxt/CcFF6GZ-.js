import{a as e,c as t,d as n,f as r,i as ee,l as te,m as i,n as ne,o as a,p as re,r as ie,s as ae,t as oe,u as se}from"./C26Vr7SN.js";import{B as ce,Ca as o,Ga as s,Ha as c,Hn as l,I as le,Ia as u,Ir as ue,Ja as d,La as f,N as de,Na as fe,Ni as pe,Oa as p,Qt as m,Sa as h,So as me,Ta as g,X as he,Y as ge,Z as _e,_a as _,ai as ve,an as v,ea as y,eo as ye,go as b,ha as be,ho as xe,in as x,ir as Se,ka as S,nn as C,on as Ce,po as we,qa as w,rn as Te,so as T,to as Ee,wa as E,wo as D,xa as O,xo as k,yo as A,z as j}from"#entry";import{t as De}from"./BQSwgocG.js";import{t as Oe}from"./VeSnrGk5.js";var M=Object.assign({inheritAttrs:!1},{__name:`SelectMenu`,props:u({id:{type:String,required:!1},placeholder:{type:String,required:!1},searchInput:{type:[Boolean,Object],required:!1,default:!0},color:{type:null,required:!1},variant:{type:null,required:!1},size:{type:null,required:!1},required:{type:Boolean,required:!1},trailingIcon:{type:String,required:!1},selectedIcon:{type:String,required:!1},content:{type:Object,required:!1},arrow:{type:[Boolean,Object],required:!1},portal:{type:[Boolean,String],required:!1,skipCheck:!0,default:!0},valueKey:{type:null,required:!1},labelKey:{type:null,required:!1,default:`label`},items:{type:null,required:!1},defaultValue:{type:null,required:!1},modelValue:{type:null,required:!1},multiple:{type:Boolean,required:!1},highlight:{type:Boolean,required:!1},createItem:{type:[Boolean,String,Object],required:!1},filterFields:{type:Array,required:!1},ignoreFilter:{type:Boolean,required:!1},autofocus:{type:Boolean,required:!1},autofocusDelay:{type:Number,required:!1,default:0},class:{type:null,required:!1},ui:{type:null,required:!1},open:{type:Boolean,required:!1},defaultOpen:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},name:{type:String,required:!1},resetSearchTermOnBlur:{type:Boolean,required:!1,default:!0},resetSearchTermOnSelect:{type:Boolean,required:!1,default:!0},highlightOnHover:{type:Boolean,required:!1},icon:{type:String,required:!1},avatar:{type:Object,required:!1},leading:{type:Boolean,required:!1},leadingIcon:{type:String,required:!1},trailing:{type:Boolean,required:!1},loading:{type:Boolean,required:!1},loadingIcon:{type:String,required:!1}},{searchTerm:{type:String,default:``},searchTermModifiers:{}}),emits:u([`update:open`,`change`,`blur`,`focus`,`create`,`highlight`,`update:modelValue`],[`update:searchTerm`]),setup(u,{expose:M,emit:ke}){let N=u,P=ke,F=Ee(),I=ye(u,`searchTerm`,{type:String,default:``}),{t:L}=de(),R=pe(),{contains:z}=i({sensitivity:`base`}),Ae=ve(Se(N,`modelValue`,`defaultValue`,`open`,`defaultOpen`,`required`,`multiple`,`resetSearchTermOnBlur`,`resetSearchTermOnSelect`,`highlightOnHover`),P),je=le(b(()=>N.portal)),Me=b(()=>y(N.content,{side:`bottom`,sideOffset:8,collisionPadding:8,position:`popper`})),Ne=b(()=>N.arrow),Pe=b(()=>y(N.searchInput,{placeholder:L(`selectMenu.search`),variant:`none`})),{emitFormBlur:Fe,emitFormFocus:Ie,emitFormInput:Le,emitFormChange:Re,size:ze,color:Be,id:Ve,name:He,highlight:Ue,disabled:We,ariaAttrs:Ge}=ge(N),{orientation:Ke,size:qe}=he(N),{isLeading:B,isTrailing:V,leadingIconName:H,trailingIconName:U}=_e(b(()=>y(N,{trailingIcon:R.ui.icons.chevronDown}))),Je=O(()=>qe.value||ze.value),[Ye,W]=l(),G=O(()=>C({extend:C(De),...R.ui?.selectMenu||{}})({color:Be.value,variant:N.variant,size:Je?.value,loading:N.loading,highlight:Ue.value,leading:B.value||!!N.avatar||!!F.leading,trailing:V.value||!!F.trailing,buttonGroup:Ke.value}));function Xe(e){if(N.multiple&&Array.isArray(e)){let t=e.map(e=>v(q.value,e,{labelKey:N.labelKey,valueKey:N.valueKey})).filter(e=>e!=null&&e!==``);return t.length>0?t.join(`, `):void 0}return v(q.value,e,{labelKey:N.labelKey,valueKey:N.valueKey})}let K=O(()=>N.items?.length?Ce(N.items)?N.items:[N.items]:[]),q=O(()=>K.value.flatMap(e=>e)),J=O(()=>{if(N.ignoreFilter||!I.value)return K.value;let e=Array.isArray(N.filterFields)?N.filterFields:[N.labelKey];return K.value.map(t=>t.filter(t=>t==null?!1:typeof t==`object`?t.type&&[`label`,`separator`].includes(t.type)?!0:e.some(e=>{let n=x(t,e);return n!=null&&z(String(n),I.value)}):z(String(t),I.value))).filter(e=>e.filter(e=>!$(e)||!e.type||![`label`,`separator`].includes(e.type)).length>0)}),Y=O(()=>J.value.flatMap(e=>e)),X=O(()=>{if(!N.createItem||!I.value)return!1;let e=N.valueKey?{[N.valueKey]:I.value}:I.value;return typeof N.createItem==`object`&&N.createItem.when===`always`||N.createItem===`always`?!Y.value.find(t=>Te(t,e,N.valueKey)):!Y.value.length}),Z=O(()=>typeof N.createItem==`object`?N.createItem.position:`bottom`),Q=we(null);function Ze(){N.autofocus&&Q.value?.$el?.focus({focusVisible:!0})}c(()=>{setTimeout(()=>{Ze()},N.autofocusDelay)});function Qe(e){if(xe(N.modelValue)===e)return;let t=new Event(`change`,{target:{value:e}});P(`change`,t),Re(),Le(),N.resetSearchTermOnSelect&&(I.value=``)}function $e(e){let t;if(e){let e=new FocusEvent(`focus`);P(`focus`,e),Ie(),clearTimeout(t)}else{let e=new FocusEvent(`blur`);P(`blur`,e),Fe(),N.resetSearchTermOnBlur&&(t=setTimeout(()=>{I.value=``},100))}}function et(e,t){if($(t)){if(t.disabled){e.preventDefault();return}t.onSelect?.(e)}}function $(e){return typeof e==`object`&&!!e}return M({triggerRef:Q}),(i,c)=>(s(),g(_,null,[S(A(Ye),null,{default:T(()=>[S(A(t),{class:k(G.value.group({class:N.ui?.group}))},{default:T(()=>[S(A(a),{class:k(G.value.item({class:N.ui?.item})),value:I.value,onSelect:c[0]||=be(e=>P(`create`,I.value),[`prevent`])},{default:T(()=>[h(`span`,{class:k(G.value.itemLabel({class:N.ui?.itemLabel}))},[d(i.$slots,`create-item-label`,{item:I.value},()=>[p(D(A(L)(`selectMenu.create`,{label:I.value})),1)])],2)]),_:3},8,[`class`,`value`])]),_:3},8,[`class`])]),_:3}),S(A(r),f({id:A(Ve)},{...A(Ae),...i.$attrs,...A(Ge)},{"ignore-filter":``,"as-child":``,name:A(He),disabled:A(We),"onUpdate:modelValue":Qe,"onUpdate:open":$e}),{default:T(({modelValue:r,open:l})=>[S(A(re),{"as-child":``},{default:T(()=>[S(A(oe),{ref_key:`triggerRef`,ref:Q,class:k(G.value.base({class:[N.ui?.base,N.class]})),tabindex:`0`},{default:T(()=>[A(B)||u.avatar||F.leading?(s(),g(`span`,{key:0,class:k(G.value.leading({class:N.ui?.leading}))},[d(i.$slots,`leading`,{modelValue:r,open:l,ui:G.value},()=>[A(B)&&A(H)?(s(),o(m,{key:0,name:A(H),class:k(G.value.leadingIcon({class:N.ui?.leadingIcon}))},null,8,[`name`,`class`])):u.avatar?(s(),o(j,f({key:1,size:N.ui?.itemLeadingAvatarSize||G.value.itemLeadingAvatarSize()},u.avatar,{class:G.value.itemLeadingAvatar({class:N.ui?.itemLeadingAvatar})}),null,16,[`size`,`class`])):E(``,!0)])],2)):E(``,!0),d(i.$slots,`default`,{modelValue:r,open:l},()=>[(s(!0),g(_,null,w([Xe(r)],e=>(s(),g(_,{key:e},[e==null?(s(),g(`span`,{key:1,class:k(G.value.placeholder({class:N.ui?.placeholder}))},D(u.placeholder??`\xA0`),3)):(s(),g(`span`,{key:0,class:k(G.value.value({class:N.ui?.value}))},D(e),3))],64))),128))]),A(V)||F.trailing?(s(),g(`span`,{key:1,class:k(G.value.trailing({class:N.ui?.trailing}))},[d(i.$slots,`trailing`,{modelValue:r,open:l,ui:G.value},()=>[A(U)?(s(),o(m,{key:0,name:A(U),class:k(G.value.trailingIcon({class:N.ui?.trailingIcon}))},null,8,[`name`,`class`])):E(``,!0)])],2)):E(``,!0)]),_:2},1032,[`class`])]),_:2},1024),S(A(ie),me(fe(A(je))),{default:T(()=>[S(A(se),f({class:G.value.content({class:N.ui?.content})},Me.value),{default:T(()=>[S(A(ue),{trapped:``,class:k(G.value.focusScope({class:N.ui?.focusScope}))},{default:T(()=>[d(i.$slots,`content-top`),u.searchInput?(s(),o(A(ae),{key:0,modelValue:I.value,"onUpdate:modelValue":c[1]||=e=>I.value=e,"display-value":()=>I.value,"as-child":``},{default:T(()=>[S(Oe,f({autofocus:``,autocomplete:`off`,size:u.size},Pe.value,{class:G.value.input({class:N.ui?.input})}),null,16,[`size`,`class`])]),_:1},8,[`modelValue`,`display-value`])):E(``,!0),S(A(te),{class:k(G.value.empty({class:N.ui?.empty}))},{default:T(()=>[d(i.$slots,`empty`,{searchTerm:I.value},()=>[p(D(I.value?A(L)(`selectMenu.noMatch`,{searchTerm:I.value}):A(L)(`selectMenu.noData`)),1)])]),_:3},8,[`class`]),h(`div`,{role:`presentation`,class:k(G.value.viewport({class:N.ui?.viewport}))},[X.value&&Z.value===`top`?(s(),o(A(W),{key:0})):E(``,!0),(s(!0),g(_,null,w(J.value,(n,r)=>(s(),o(A(t),{key:`group-${r}`,class:k(G.value.group({class:N.ui?.group}))},{default:T(()=>[(s(!0),g(_,null,w(n,(t,n)=>(s(),g(_,{key:`group-${r}-${n}`},[$(t)&&t.type===`label`?(s(),o(A(ee),{key:0,class:k(G.value.label({class:[N.ui?.label,t.ui?.label,t.class]}))},{default:T(()=>[p(D(A(x)(t,N.labelKey)),1)]),_:2},1032,[`class`])):$(t)&&t.type===`separator`?(s(),o(A(ne),{key:1,class:k(G.value.separator({class:[N.ui?.separator,t.ui?.separator,t.class]}))},null,8,[`class`])):(s(),o(A(a),{key:2,class:k(G.value.item({class:[N.ui?.item,$(t)&&t.ui?.item,$(t)&&t.class]})),disabled:$(t)&&t.disabled,value:N.valueKey&&$(t)?A(x)(t,N.valueKey):t,onSelect:e=>et(e,t)},{default:T(()=>[d(i.$slots,`item`,{item:t,index:n},()=>[d(i.$slots,`item-leading`,{item:t,index:n},()=>[$(t)&&t.icon?(s(),o(m,{key:0,name:t.icon,class:k(G.value.itemLeadingIcon({class:[N.ui?.itemLeadingIcon,t.ui?.itemLeadingIcon]}))},null,8,[`name`,`class`])):$(t)&&t.avatar?(s(),o(j,f({key:1,size:t.ui?.itemLeadingAvatarSize||N.ui?.itemLeadingAvatarSize||G.value.itemLeadingAvatarSize()},{ref_for:!0},t.avatar,{class:G.value.itemLeadingAvatar({class:[N.ui?.itemLeadingAvatar,t.ui?.itemLeadingAvatar]})}),null,16,[`size`,`class`])):$(t)&&t.chip?(s(),o(ce,f({key:2,size:N.ui?.itemLeadingChipSize||G.value.itemLeadingChipSize(),inset:``,standalone:``},{ref_for:!0},t.chip,{class:G.value.itemLeadingChip({class:[N.ui?.itemLeadingChip,t.ui?.itemLeadingChip]})}),null,16,[`size`,`class`])):E(``,!0)]),h(`span`,{class:k(G.value.itemLabel({class:[N.ui?.itemLabel,$(t)&&t.ui?.itemLabel]}))},[d(i.$slots,`item-label`,{item:t,index:n},()=>[p(D($(t)?A(x)(t,N.labelKey):t),1)])],2),h(`span`,{class:k(G.value.itemTrailing({class:[N.ui?.itemTrailing,$(t)&&t.ui?.itemTrailing]}))},[d(i.$slots,`item-trailing`,{item:t,index:n}),S(A(e),{"as-child":``},{default:T(()=>[S(m,{name:u.selectedIcon||A(R).ui.icons.check,class:k(G.value.itemTrailingIcon({class:[N.ui?.itemTrailingIcon,$(t)&&t.ui?.itemTrailingIcon]}))},null,8,[`name`,`class`])]),_:2},1024)],2)])]),_:2},1032,[`class`,`disabled`,`value`,`onSelect`]))],64))),128))]),_:2},1032,[`class`]))),128)),X.value&&Z.value===`bottom`?(s(),o(A(W),{key:1})):E(``,!0)],2),d(i.$slots,`content-bottom`)]),_:3},8,[`class`]),u.arrow?(s(),o(A(n),f({key:0},Ne.value,{class:G.value.arrow({class:N.ui?.arrow})}),null,16,[`class`])):E(``,!0)]),_:3},16,[`class`])]),_:3},16)]),_:3},16,[`id`,`name`,`disabled`])],64))}});export{M as t};
//# sourceMappingURL=CcFF6GZ-.js.map