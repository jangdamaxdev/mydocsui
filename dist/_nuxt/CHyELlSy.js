import{t as e}from"./-4LthkDL.js";import{Ai as t,Ca as n,Ei as r,Ga as i,Ha as a,Ja as o,La as s,Ra as c,Ua as l,Xr as u,Yr as d,_o as f,bi as p,ja as m,ji as h,ka as g,li as _,ma as v,po as y,ro as b,si as x,so as S,xa as C,yo as w}from"#entry";var[T,E]=h(`PinInputRoot`),D=m({inheritAttrs:!1,__name:`PinInputRoot`,props:{modelValue:{type:null,required:!1},defaultValue:{type:Array,required:!1},placeholder:{type:String,required:!1,default:``},mask:{type:Boolean,required:!1},otp:{type:Boolean,required:!1},type:{type:null,required:!1,default:`text`},dir:{type:String,required:!1},disabled:{type:Boolean,required:!1},id:{type:String,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},name:{type:String,required:!1},required:{type:Boolean,required:!1}},emits:[`update:modelValue`,`complete`],setup(t,{emit:r}){let a=t,c=r,{mask:l,otp:d,placeholder:m,type:h,disabled:v,dir:T}=f(a),{forwardRef:D}=x(),O=_(T),k=p(a,`modelValue`,c,{defaultValue:a.defaultValue??[],passive:a.modelValue===void 0}),A=C(()=>Array.isArray(k.value)?[...k.value]:[]),j=y(new Set);function M(e){j.value.add(e)}let N=C(()=>a.type===`number`),P=C(()=>A.value.filter(e=>!!e||N.value&&e===0).length===j.value.size);return b(k,()=>{P.value&&c(`complete`,k.value)},{deep:!0}),E({modelValue:k,currentModelValue:A,mask:l,otp:d,placeholder:m,type:h,dir:O,disabled:v,isCompleted:P,inputElements:j,onInputElementChange:M,isNumericMode:N}),(t,r)=>(i(),n(w(u),s(t.$attrs,{ref:w(D),dir:w(O),"data-complete":P.value?``:void 0,"data-disabled":w(v)?``:void 0}),{default:S(()=>[o(t.$slots,`default`,{modelValue:w(k)}),g(e,{id:t.id,as:`input`,feature:`focusable`,tabindex:`-1`,value:A.value.join(``),name:t.name??``,disabled:w(v),required:t.required,onFocus:r[0]||=e=>Array.from(j.value)?.[0]?.focus()},null,8,[`id`,`value`,`name`,`disabled`,`required`])]),_:3},16,[`dir`,`data-complete`,`data-disabled`]))}}),O=m({__name:`PinInputInput`,props:{index:{type:Number,required:!0},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:`input`}},setup(e){let s=e,f=T(),p=C(()=>Array.from(f.inputElements.value)),m=C(()=>f.currentModelValue.value[s.index]),h=C(()=>s.disabled||f.disabled.value),g=C(()=>f.otp.value),_=C(()=>f.mask.value),{primitiveElement:y,currentElement:x}=d();function E(e){let t=e.target;if((e.data?.length??0)>1){P(t.value);return}if(f.isNumericMode.value&&!/^\d*$/.test(t.value)){t.value=t.value.replace(/\D/g,``);return}t.value=e.data??``,I(s.index,t.value);let n=p.value[s.index+1];n&&n.focus()}function D(){let e=x.value;c(()=>{e&&!e.value&&(e.placeholder=f.placeholder.value)})}function O(e){r(e,t(),void 0,{itemsArray:p.value,focus:!0,loop:!1,arrowKeyOptions:`horizontal`,dir:f.dir.value})}function k(e){if(e.preventDefault(),e.target.value)I(s.index,``);else{let e=p.value[s.index-1];e&&(e.focus(),I(s.index-1,``))}}function A(e){e.key===`Delete`&&(e.preventDefault(),I(s.index,``))}function j(e){let t=e.target;t.setSelectionRange(1,1),t.value||(t.placeholder=``)}function M(e){D()}function N(e){e.preventDefault();let t=e.clipboardData;if(!t)return;let n=t.getData(`text`);P(n)}function P(e){let t=[...f.currentModelValue.value],n=e.length>=p.value.length?0:s.index,r=Math.min(n+e.length,p.value.length);for(let i=n;i<r;i++){let r=p.value[i],a=e[i-n];f.isNumericMode.value&&!/^\d*$/.test(a)||(t[i]=a,r.focus())}f.modelValue.value=t,p.value[r]?.focus()}function F(e){let t=e.length-1;for(;t>=0&&e[t]===``;)e.pop(),t--;return e}function I(e,t){let n=[...f.currentModelValue.value];if(f.isNumericMode.value){let r=+t;t===``||isNaN(r)?delete n[e]:n[e]=r}else n[e]=t;f.modelValue.value=F(n)}return b(m,()=>{m.value||D()}),a(()=>{f.onInputElementChange(x.value)}),l(()=>{f.inputElements?.value.delete(x.value)}),(e,t)=>(i(),n(w(u),{ref_key:`primitiveElement`,ref:y,autocapitalize:`none`,as:e.as,"as-child":e.asChild,autocomplete:g.value?`one-time-code`:`false`,type:_.value?`password`:`text`,inputmode:w(f).isNumericMode.value?`numeric`:`text`,pattern:w(f).isNumericMode.value?`[0-9]*`:void 0,placeholder:w(f).placeholder.value,value:m.value,disabled:h.value,"data-disabled":h.value?``:void 0,"data-complete":w(f).isCompleted.value?``:void 0,"aria-label":`pin input ${e.index+1} of ${p.value.length}`,onInput:t[0]||=e=>E(e),onKeydown:[v(O,[`left`,`right`,`up`,`down`,`home`,`end`]),v(k,[`backspace`]),v(A,[`delete`])],onFocus:j,onBlur:M,onPaste:N},{default:S(()=>[o(e.$slots,`default`)]),_:3},8,[`as`,`as-child`,`autocomplete`,`type`,`inputmode`,`pattern`,`placeholder`,`value`,`disabled`,`data-disabled`,`data-complete`,`aria-label`]))}});export{D as n,O as t};
//# sourceMappingURL=CHyELlSy.js.map