{"version":3,"file":"CbVT7onS.js","names":["$attrs"],"sources":["../../node_modules/libs/nuip/dist/runtime/composables/useScrollspy.js","../../node_modules/libs/nuip/dist/runtime/components/content/ContentToc.vue"],"sourcesContent":["import { ref, watch, onBeforeMount, onBeforeUnmount } from \"vue\";\nexport function useScrollspy() {\n  const observer = ref();\n  const visibleHeadings = ref([]);\n  const activeHeadings = ref([]);\n  function observerCallback(entries) {\n    entries.forEach((entry) => {\n      const id = entry.target.id;\n      if (!id) {\n        return;\n      }\n      if (entry.isIntersecting) {\n        visibleHeadings.value = [...visibleHeadings.value, id];\n      } else {\n        visibleHeadings.value = visibleHeadings.value.filter((h) => h !== id);\n      }\n    });\n  }\n  function updateHeadings(headings) {\n    headings.forEach((heading) => {\n      if (!observer.value) {\n        return;\n      }\n      observer.value.observe(heading);\n    });\n  }\n  watch(visibleHeadings, (val, oldVal) => {\n    if (val.length === 0) {\n      activeHeadings.value = oldVal;\n    } else {\n      activeHeadings.value = val;\n    }\n  });\n  onBeforeMount(() => observer.value = new IntersectionObserver(observerCallback));\n  onBeforeUnmount(() => observer.value?.disconnect());\n  return {\n    visibleHeadings,\n    activeHeadings,\n    updateHeadings\n  };\n}\n","<script>\nimport theme from \"#build/ui-pro/content/content-toc\";\n</script>\n\n<script setup>\nimport { computed } from \"vue\";\nimport { CollapsibleRoot, CollapsibleTrigger, CollapsibleContent, useForwardPropsEmits } from \"reka-ui\";\nimport { reactivePick, createReusableTemplate } from \"@vueuse/core\";\nimport UIcon from \"@nuxt/ui/components/Icon.vue\";\nimport { useRouter, useAppConfig, useNuxtApp } from \"#imports\";\nimport { useScrollspy } from \"../../composables/useScrollspy\";\nimport { useLocalePro } from \"../../composables/useLocalePro\";\nimport { tv } from \"../../utils/tv\";\ndefineOptions({ inheritAttrs: false });\nconst props = defineProps({\n  as: { type: null, required: false, default: \"nav\" },\n  trailingIcon: { type: String, required: false },\n  title: { type: String, required: false },\n  color: { type: null, required: false },\n  highlight: { type: Boolean, required: false },\n  highlightColor: { type: null, required: false },\n  links: { type: Array, required: false },\n  class: { type: null, required: false },\n  ui: { type: null, required: false },\n  defaultOpen: { type: Boolean, required: false },\n  open: { type: Boolean, required: false }\n});\nconst emits = defineEmits([\"update:open\", \"move\"]);\nconst slots = defineSlots();\nconst rootProps = useForwardPropsEmits(reactivePick(props, \"as\", \"open\", \"defaultOpen\"), emits);\nconst { t } = useLocalePro();\nconst router = useRouter();\nconst appConfig = useAppConfig();\nconst { activeHeadings, updateHeadings } = useScrollspy();\nconst [DefineListTemplate, ReuseListTemplate] = createReusableTemplate({\n  props: {\n    links: Array,\n    level: Number\n  }\n});\nconst [DefineTriggerTemplate, ReuseTriggerTemplate] = createReusableTemplate();\nconst ui = computed(() => tv({ extend: tv(theme), ...appConfig.uiPro?.contentToc || {} })({\n  color: props.color,\n  highlight: props.highlight,\n  highlightColor: props.highlightColor || props.color\n}));\nfunction scrollToHeading(id) {\n  const encodedId = encodeURIComponent(id);\n  router.push(`#${encodedId}`);\n  emits(\"move\", id);\n}\nfunction flattenLinks(links) {\n  return links.flatMap((link) => [link, ...link.children ? flattenLinks(link.children) : []]);\n}\nconst indicatorStyle = computed(() => {\n  if (!activeHeadings.value?.length) {\n    return;\n  }\n  const flatLinks = flattenLinks(props.links || []);\n  const activeIndex = flatLinks.findIndex((link) => activeHeadings.value.includes(link.id));\n  const linkHeight = 28;\n  const gapSize = 0;\n  return {\n    \"--indicator-size\": `${linkHeight * activeHeadings.value.length + gapSize * (activeHeadings.value.length - 1)}px`,\n    \"--indicator-position\": activeIndex >= 0 ? `${activeIndex * (linkHeight + gapSize)}px` : \"0px\"\n  };\n});\nconst nuxtApp = useNuxtApp();\nnuxtApp.hooks.hook(\"page:loading:end\", () => {\n  const headings = Array.from(document.querySelectorAll(\"h2, h3\"));\n  updateHeadings(headings);\n});\nnuxtApp.hooks.hook(\"page:transition:finish\", () => {\n  const headings = Array.from(document.querySelectorAll(\"h2, h3\"));\n  updateHeadings(headings);\n});\n</script>\n\n<template>\n  <!-- eslint-disable-next-line vue/no-template-shadow -->\n  <DefineListTemplate v-slot=\"{ links, level }\">\n    <ul :class=\"level > 0 ? ui.listWithChildren({ class: props.ui?.listWithChildren }) : ui.list({ class: props.ui?.list })\">\n      <li v-for=\"(link, index) in links\" :key=\"index\" :class=\"link.children && link.children.length > 0 ? ui.itemWithChildren({ class: [props.ui?.itemWithChildren, link.ui?.itemWithChildren] }) : ui.item({ class: [props.ui?.item, link.ui?.item] })\">\n        <a :href=\"`#${link.id}`\" :class=\"ui.link({ class: [props.ui?.link, link.ui?.link, link.class], active: activeHeadings.includes(link.id) })\" @click.prevent=\"scrollToHeading(link.id)\">\n          <slot name=\"link\" :link=\"link\">\n            <span :class=\"ui.linkText({ class: [props.ui?.linkText, link.ui?.linkText] })\">\n              {{ link.text }}\n            </span>\n          </slot>\n        </a>\n\n        <ReuseListTemplate v-if=\"link.children?.length\" :links=\"link.children\" :level=\"level + 1\" />\n      </li>\n    </ul>\n  </DefineListTemplate>\n\n  <DefineTriggerTemplate v-slot=\"{ open }\">\n    <slot name=\"leading\" :open=\"open\" />\n\n    <span :class=\"ui.title({ class: props.ui?.title })\">\n      <slot :open=\"open\">{{ title || t(\"contentToc.title\") }}</slot>\n    </span>\n\n    <span :class=\"ui.trailing({ class: props.ui?.trailing })\">\n      <slot name=\"trailing\" :open=\"open\">\n        <UIcon :name=\"trailingIcon || appConfig.ui.icons.chevronDown\" :class=\"ui.trailingIcon({ class: props.ui?.trailingIcon })\" />\n      </slot>\n    </span>\n  </DefineTriggerTemplate>\n\n  <CollapsibleRoot v-slot=\"{ open }\" v-bind=\"{ ...rootProps, ...$attrs }\" :default-open=\"defaultOpen\" :class=\"ui.root({ class: [props.ui?.root, props.class] })\">\n    <div :class=\"ui.container({ class: props.ui?.container })\">\n      <div v-if=\"!!slots.top\" :class=\"ui.top({ class: props.ui?.top })\">\n        <slot name=\"top\" :links=\"links\" />\n      </div>\n\n      <template v-if=\"links?.length\">\n        <CollapsibleTrigger :class=\"ui.trigger({ class: 'lg:hidden' })\">\n          <ReuseTriggerTemplate :open=\"open\" />\n        </CollapsibleTrigger>\n\n        <CollapsibleContent :class=\"ui.content({ class: [props.ui?.content, 'lg:hidden'] })\">\n          <div v-if=\"highlight\" :class=\"ui.indicator({ class: props.ui?.indicator })\" :style=\"indicatorStyle\" />\n\n          <slot name=\"content\" :links=\"links\">\n            <ReuseListTemplate :links=\"links\" :level=\"0\" />\n          </slot>\n        </CollapsibleContent>\n\n        <p :class=\"ui.trigger({ class: 'hidden lg:flex' })\">\n          <ReuseTriggerTemplate :open=\"open\" />\n        </p>\n\n        <div :class=\"ui.content({ class: [props.ui?.content, 'hidden lg:flex'] })\">\n          <div v-if=\"highlight\" :class=\"ui.indicator({ class: props.ui?.indicator })\" :style=\"indicatorStyle\" />\n\n          <slot name=\"content\" :links=\"links\">\n            <ReuseListTemplate :links=\"links\" :level=\"0\" />\n          </slot>\n        </div>\n      </template>\n\n      <div v-if=\"!!slots.bottom\" :class=\"ui.bottom({ class: props.ui?.bottom, body: !!slots.top || !!links?.length })\">\n        <slot name=\"bottom\" :links=\"links\" />\n      </div>\n    </div>\n  </CollapsibleRoot>\n</template>\n"],"mappings":"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"}