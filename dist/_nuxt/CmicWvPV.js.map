{"version":3,"file":"CmicWvPV.js","names":[],"sources":["../../node_modules/libs/nuip/dist/runtime/composables/useResizable.js"],"sourcesContent":["import { ref, computed, unref, isRef, watch } from \"vue\";\nimport { useStorage } from \"@vueuse/core\";\nimport { useCookie } from \"#imports\";\nimport { useLocalePro } from \"./useLocalePro.js\";\nexport const useResizable = (key, options = {}, { collapsed = ref(false) } = {}) => {\n  const el = ref(null);\n  const opts = computed(() => ({\n    side: \"left\",\n    minSize: 0,\n    maxSize: 100,\n    defaultSize: 0,\n    storage: \"cookie\",\n    persistent: true,\n    collapsible: false,\n    collapsedSize: 0,\n    resizable: true,\n    unit: \"%\",\n    ...isRef(options) ? options.value : options\n  }));\n  const { dir } = useLocalePro();\n  const defaultStorageValue = {\n    size: opts.value.defaultSize,\n    collapsed: unref(collapsed) ?? false\n  };\n  const storageData = opts.value.persistent && (opts.value.resizable || opts.value.collapsible) ? opts.value.storage === \"cookie\" ? useCookie(key, { default: () => defaultStorageValue }) : useStorage(key, defaultStorageValue) : ref(defaultStorageValue);\n  const isCollapsed = computed({\n    get: () => storageData.value.collapsed,\n    set: (value) => {\n      if (!opts.value.collapsible) {\n        return;\n      }\n      if (isRef(collapsed)) {\n        collapsed.value = value;\n      }\n      storageData.value.collapsed = value;\n    }\n  });\n  const previousSize = ref(opts.value.defaultSize);\n  const size = computed({\n    get: () => storageData.value.size,\n    set: (value) => {\n      storageData.value.size = value;\n    }\n  });\n  const currentSize = computed(() => isCollapsed.value ? opts.value.collapsedSize : size.value);\n  const isDragging = ref(false);\n  const onMouseMove = (e, initialPos, initialSize) => {\n    if (!el.value || !opts.value.resizable) {\n      return;\n    }\n    const parentSize = el.value.parentElement?.offsetWidth || 1;\n    const isRtl = dir.value === \"rtl\";\n    let delta;\n    if (isRtl) {\n      delta = opts.value.side === \"left\" ? initialPos - e.clientX : e.clientX - initialPos;\n    } else {\n      delta = opts.value.side === \"left\" ? e.clientX - initialPos : initialPos - e.clientX;\n    }\n    const newSize = initialSize + delta;\n    let newValue;\n    if (opts.value.unit === \"rem\") {\n      const rootFontSize = Number.parseFloat(getComputedStyle(document.documentElement).fontSize);\n      newValue = newSize / rootFontSize;\n    } else if (opts.value.unit === \"px\") {\n      newValue = newSize;\n    } else {\n      newValue = newSize / parentSize * 100;\n    }\n    if (opts.value.collapsible && newValue < opts.value.collapsedSize + 4) {\n      collapse(true);\n      return;\n    } else if (isCollapsed.value) {\n      collapse(false);\n    }\n    size.value = Math.min(opts.value.maxSize, Math.max(opts.value.minSize, newValue));\n  };\n  const onMouseDown = (e) => {\n    if (!el.value || !opts.value.resizable) {\n      return;\n    }\n    e.preventDefault();\n    e.stopPropagation();\n    const elWidth = el.value.getBoundingClientRect().width;\n    if (!elWidth) {\n      return;\n    }\n    const initialX = e.clientX;\n    const initialWidth = elWidth;\n    isDragging.value = true;\n    const handleMouseMove = (e2) => {\n      onMouseMove(e2, initialX, initialWidth);\n    };\n    const handleMouseUp = () => {\n      isDragging.value = false;\n      document.removeEventListener(\"mousemove\", handleMouseMove);\n      document.removeEventListener(\"mouseup\", handleMouseUp);\n    };\n    document.addEventListener(\"mousemove\", handleMouseMove);\n    document.addEventListener(\"mouseup\", handleMouseUp);\n  };\n  const onTouchMove = (e, initialPos, initialSize) => {\n    if (!el.value || !opts.value.resizable || !e.touches[0]) {\n      return;\n    }\n    const parentSize = el.value.parentElement?.offsetWidth || 1;\n    const isRtl = dir.value === \"rtl\";\n    let delta;\n    if (isRtl) {\n      delta = opts.value.side === \"left\" ? initialPos - e.touches[0].clientX : e.touches[0].clientX - initialPos;\n    } else {\n      delta = opts.value.side === \"left\" ? e.touches[0].clientX - initialPos : initialPos - e.touches[0].clientX;\n    }\n    const newSize = initialSize + delta;\n    let newValue;\n    if (opts.value.unit === \"rem\") {\n      const rootFontSize = Number.parseFloat(getComputedStyle(document.documentElement).fontSize);\n      newValue = newSize / rootFontSize;\n    } else if (opts.value.unit === \"px\") {\n      newValue = newSize;\n    } else {\n      newValue = newSize / parentSize * 100;\n    }\n    if (opts.value.collapsible && newValue < opts.value.collapsedSize + 4) {\n      collapse(true);\n      return;\n    } else if (isCollapsed.value) {\n      collapse(false);\n    }\n    size.value = Math.min(opts.value.maxSize, Math.max(opts.value.minSize, newValue));\n  };\n  const onTouchStart = (e) => {\n    if (!el.value || !opts.value.resizable || !e.touches[0]) {\n      return;\n    }\n    e.preventDefault();\n    e.stopPropagation();\n    const elWidth = el.value.getBoundingClientRect().width;\n    if (!elWidth) {\n      return;\n    }\n    const initialX = e.touches[0].clientX;\n    const initialWidth = elWidth;\n    isDragging.value = true;\n    const handleTouchMove = (e2) => {\n      onTouchMove(e2, initialX, initialWidth);\n    };\n    const handleTouchEnd = () => {\n      isDragging.value = false;\n      document.removeEventListener(\"touchmove\", handleTouchMove);\n      document.removeEventListener(\"touchend\", handleTouchEnd);\n      document.removeEventListener(\"touchcancel\", handleTouchEnd);\n    };\n    document.addEventListener(\"touchmove\", handleTouchMove, { passive: false });\n    document.addEventListener(\"touchend\", handleTouchEnd);\n    document.addEventListener(\"touchcancel\", handleTouchEnd);\n  };\n  const onDoubleClick = (e) => {\n    if (!el.value || !opts.value.resizable) {\n      return;\n    }\n    e.preventDefault();\n    e.stopPropagation();\n    if (isCollapsed.value) {\n      collapse(false);\n    }\n    size.value = opts.value.defaultSize;\n  };\n  const collapse = (value) => {\n    if (!opts.value.collapsible) {\n      return;\n    }\n    const newCollapsed = value ?? !isCollapsed.value;\n    if (newCollapsed && !isCollapsed.value) {\n      previousSize.value = size.value;\n    } else if (!newCollapsed && isCollapsed.value) {\n      size.value = previousSize.value;\n    }\n    isCollapsed.value = newCollapsed;\n  };\n  if (isRef(collapsed) && storageData.value.collapsed) {\n    collapsed.value = storageData.value.collapsed;\n  }\n  if (isRef(collapsed)) {\n    watch(collapsed, (value) => {\n      if (!opts.value.collapsible) {\n        return;\n      }\n      if (storageData.value.collapsed !== value) {\n        storageData.value.collapsed = value;\n      }\n    });\n  }\n  return {\n    el,\n    size: currentSize,\n    isDragging,\n    isCollapsed,\n    onMouseDown,\n    onTouchStart,\n    onDoubleClick,\n    collapse\n  };\n};\n"],"mappings":"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"}