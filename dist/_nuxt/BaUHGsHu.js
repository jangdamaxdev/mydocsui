const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./fGtGBTXi.js","./DqbiEdpD.js","./entry.N4cj79pS.css"])))=>i.map(i=>d[i]);
import{$i as e,Ga as t,Gi as n,Ha as r,Ii as i,Ni as a,Qi as o,Sa as s,Ta as c,Ua as l,Ui as u,Zi as d,_a as f,aa as p,ca as m,fa as ee,ft as h,ka as g,na as _,oa as v,po as y,ra as b,so as te,ta as x,ua as S,wa as C,wo as ne,xo as re,zi as w}from"#entry";import{t as T}from"./CfjhHW4G.js";var ie={key:0},ae={key:0},oe={id:`__preview_loader`},se={__name:`ContentPreviewMode`,props:{previewToken:{type:String,required:!0},api:{type:String,required:!0},initializePreview:{type:Function,required:!0}},setup(e){let a=e,u=[`__nuxt_preview`,`__preview_enabled`],d=_(),p=o(),m=y(!0),ee=y(!1),h=y(!1),v=y(``),b,x=async()=>{i(`previewToken`).value=``,window.sessionStorage.removeItem(`previewToken`),window.sessionStorage.removeItem(`previewAPI`),await p.replace({query:{preview:void 0}}),window.location.reload()},w=async e=>{await a.initializePreview(e),i(`previewToken`).value&&(h.value=!0,await p.replace({query:{}}),d.callHook(`nuxt-content:preview:ready`),window.parent&&window.self!==window.parent&&b.disconnect())};return r(async()=>{b=(await n(()=>import(`./fGtGBTXi.js`),__vite__mapDeps([0,1,2]),import.meta.url)).connect(`${a.api}/preview`,{transports:[`websocket`,`polling`],auth:{token:a.previewToken}});let e;b.on(`connect`,()=>{e=setTimeout(()=>{h.value||(e=setTimeout(()=>{v.value=`Preview sync timed out`,h.value=!1},3e4),b.emit(`draft:requestSync`))},3e4)});let t=()=>{e&&=(clearTimeout(e),null)};b.on(`draft:sync`,async e=>{if(t(),!e){try{b.once(`draft:ready`,()=>{b.emit(`draft:requestSync`)}),await $fetch(`api/projects/preview/sync`,{baseURL:a.api,method:`POST`,params:{token:a.previewToken}})}catch(e){switch(t(),e.response.status){case 404:v.value=`Preview draft not found`,h.value=!1;break;default:v.value=`An error occurred while syncing preview`,h.value=!1}}return}w(e)}),b.on(`draft:unauthorized`,()=>{t(),v.value=`Unauthorized preview`,h.value=!1}),b.on(`disconnect`,()=>{t()}),document.body.classList.add(...u)}),l(()=>{document.body.classList.remove(...u)}),(e,n)=>(t(),c(`div`,null,[m.value?(t(),c(`div`,{key:0,id:`__nuxt_preview`,class:re({__preview_ready:h.value,__preview_refreshing:ee.value})},[h.value?(t(),c(f,{key:0},[n[0]||=s(`svg`,{viewBox:`0 0 90 90`,fill:`none`,xmlns:`http://www.w3.org/2000/svg`},[s(`path`,{d:`M50.0016 71.0999h29.2561c.9293.0001 1.8422-.241 2.6469-.6992.8047-.4582 1.4729-1.1173 1.9373-1.9109.4645-.7936.7088-1.6939.7083-2.6102-.0004-.9162-.2455-1.8163-.7106-2.6095L64.192 29.713c-.4644-.7934-1.1325-1.4523-1.937-1.9105-.8046-.4581-1.7173-.6993-2.6463-.6993-.9291 0-1.8418.2412-2.6463.6993-.8046.4582-1.4726 1.1171-1.937 1.9105l-5.0238 8.5861-9.8224-16.7898c-.4648-.7934-1.1332-1.4522-1.938-1.9102-.8047-.4581-1.7176-.6992-2.6468-.6992-.9292 0-1.842.2411-2.6468.6992-.8048.458-1.4731 1.1168-1.9379 1.9102L6.56062 63.2701c-.46512.7932-.71021 1.6933-.71061 2.6095-.00041.9163.24389 1.8166.70831 2.6102.46443.7936 1.1326 1.4527 1.93732 1.9109.80473.4582 1.71766.6993 2.64686.6992h18.3646c7.2763 0 12.6422-3.1516 16.3345-9.3002l8.9642-15.3081 4.8015-8.1925 14.4099 24.6083H54.8058l-4.8042 8.1925ZM29.2077 62.899l-12.8161-.0028L35.603 30.0869l9.5857 16.4047-6.418 10.9645c-2.4521 3.9894-5.2377 5.4429-9.563 5.4429Z`,fill:`currentColor`})],-1),n[1]||=s(`span`,null,`Preview enabled`,-1),s(`button`,{onClick:x},` Close `)],64)):C(``,!0)],2)):C(``,!0),g(S,{name:`preview-loading`},{default:te(()=>[m.value&&!h.value&&!v.value?(t(),c(`div`,ie,[n[4]||=s(`div`,{id:`__preview_background`},null,-1),s(`div`,{id:`__preview_loader`},[n[2]||=s(`svg`,{id:`__preview_loading_icon`,width:`32`,height:`32`,viewBox:`0 0 24 24`},[s(`path`,{fill:`none`,stroke:`currentColor`,"stroke-linecap":`round`,"stroke-linejoin":`round`,"stroke-width":`2`,d:`M4 4v5h.582m15.356 2A8.001 8.001 0 0 0 4.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 0 1-15.357-2m15.357 2H15`})],-1),n[3]||=s(`p`,null,`Initializing the preview...`,-1),s(`button`,{onClick:x},` Cancel `)])])):C(``,!0)]),_:1}),g(S,{name:`preview-loading`},{default:te(()=>[v.value?(t(),c(`div`,ae,[n[5]||=s(`div`,{id:`__preview_background`},null,-1),s(`div`,oe,[s(`p`,null,ne(v.value),1),s(`button`,{onClick:x},` Exit preview `)])])):C(``,!0)]),_:1})]))}},ce=h(se,[[`__scopeId`,`data-v-5dbefe26`]]),le=/^[A-Za-z]:\//;function E(e=``){return e&&e.replace(/\\/g,`/`).replace(le,e=>e.toUpperCase())}var ue=/^[/\\]{2}/,de=/^[/\\](?![/\\])|^[/\\]{2}(?!\.)|^[A-Za-z]:[/\\]/,fe=/^[A-Za-z]:$/,pe=/.(\.[^./]+|\.)$/,me=/^[/\\]|^[a-zA-Z]:[/\\]/,he=function(e){if(e.length===0)return`.`;e=E(e);let t=e.match(ue),n=O(e),r=e[e.length-1]===`/`;return e=ge(e,!n),e.length===0?n?`/`:r?`./`:`.`:(r&&(e+=`/`),fe.test(e)&&(e+=`/`),t?n?`//${e}`:`//./${e}`:n&&!O(e)?`/${e}`:e)},D=function(...e){let t=``;for(let n of e){if(!n)continue;if(t.length>0){let e=t[t.length-1]===`/`,r=n[0]===`/`;e&&r?t+=n.slice(1):t+=e||r?n:`/${n}`}else t+=n}return he(t)};function ge(e,t){let n=``,r=0,i=-1,a=0,o=null;for(let s=0;s<=e.length;++s){if(s<e.length)o=e[s];else if(o===`/`)break;else o=`/`;if(o===`/`){if(!(i===s-1||a===1))if(a===2){if(n.length<2||r!==2||n[n.length-1]!==`.`||n[n.length-2]!==`.`){if(n.length>2){let e=n.lastIndexOf(`/`);e===-1?(n=``,r=0):(n=n.slice(0,e),r=n.length-1-n.lastIndexOf(`/`)),i=s,a=0;continue}else if(n.length>0){n=``,r=0,i=s,a=0;continue}}t&&(n+=n.length>0?`/..`:`..`,r=2)}else n.length>0?n+=`/${e.slice(i+1,s)}`:n=e.slice(i+1,s),r=s-i-1;i=s,a=0}else o===`.`&&a!==-1?++a:a=-1}return n}var O=function(e){return de.test(e)},_e=function(e){if(e===`..`)return``;let t=pe.exec(E(e));return t&&t[1]||``},k=function(e){let t=E(e).replace(/\/$/,``).split(`/`).slice(0,-1);return t.length===1&&fe.test(t[0])&&(t[0]+=`/`),t.join(`/`)||(O(e)?`/`:`.`)},ve=function(e,t){let n=E(e).split(`/`),r=``;for(let e=n.length-1;e>=0;e--){let t=n[e];if(t){r=t;break}}return t&&r.endsWith(t)?r.slice(0,-t.length):r},ye=function(e){let t=me.exec(e)?.[0]?.replace(/\\/g,`/`)||``,n=ve(e),r=_e(n);return{root:t,dir:k(e),base:n,ext:r,name:n.slice(0,n.length-r.length)}};const A={appConfig:`app.config.ts`,appConfigV4:`app/app.config.ts`,nuxtConfig:`nuxt.config.ts`};function j(e){return e?.startsWith(`content/`)?e.split(`/`).slice(1).join(`/`):m(e)}function M(e,t=!1){return e&&(t?v(e.replace(/\/\d+\./,`/`)):m(e.replace(/^\d+\./,``)))}function N(e){let t=j(e);return D(k(t),ye(t).name)}function be(e=[],t,n){let r=[...t||[]],i=[...n||[]],a=JSON.parse(JSON.stringify(e));for(let e of r)if(e.new)a.push({path:e.path,parsed:e.parsed});else if(e.oldPath)if(i.splice(i.findIndex(t=>t.path===e.oldPath),1),r.find(t=>t.path===e.oldPath))a.push({path:e.path,parsed:e.parsed});else{let t=a.find(t=>t.path===e.oldPath);t&&(t.path=e.path,e.parsed?t.parsed=e.parsed:e.pathMeta&&[`_file`,`_path`,`_id`,`_locale`].forEach(n=>{t.parsed[n]=e.pathMeta[n]}))}else{let t=a.find(t=>t.path===e.path);t?Object.assign(t,{path:e.path,parsed:e.parsed}):a.push({path:e.path,parsed:e.parsed})}for(let e of i)a.splice(a.findIndex(t=>t.path===e.path),1);let o=new Intl.Collator(void 0,{numeric:!0});return a.sort((e,t)=>o.compare(e.path,t.path)),a}const xe=e((e,t,n)=>{if(Array.isArray(e[t])&&Array.isArray(n))return e[t]=n,!0}),Se=e=>{let t;return n=>(t||=e(),t)};function Ce(e,t){for(let n in e){let r=t[n];n in t||delete e[n],typeof r==`object`&&r&&Ce(e[n],t[n])}}function we(e,t){for(let n in t){let r=t[n];if(r===`_DELETED_`){delete e[n];continue}typeof r==`object`&&r?Array.isArray(r)&&Array.isArray(e[n])?e[n]=r:(e[n]=e[n]||{},we(e[n],r)):e[n]=r}}function Te(e){let[t,...n]=e.include.includes(`*`)?e.include.split(`*`):[``,e.include];return{fixed:t||``,dynamic:`*`+n.join(`*`)}}const Ee=(e,t,n)=>{let{fixed:r}=Te(n);if(!e.parsed)return;let i=M(r||``),a=M(n?.prefix||``,!0),o=e.parsed._path.substring(i.length),s=D(a,o),c={id:e.parsed._id,stem:e.parsed._stem,meta:{},extension:e.parsed._extension,path:s},l=t.schema.definitions[t.name].properties;return Object.keys(e.parsed).forEach(t=>{t in l?c[t]=e.parsed[t]:c.meta[t]=e.parsed[t]}),c},De=(e,t,n)=>{let r=e instanceof RegExp?Oe(e,n):e,i=t instanceof RegExp?Oe(t,n):t,a=r!==null&&i!=null&&ke(r,i,n);return a&&{start:a[0],end:a[1],pre:n.slice(0,a[0]),body:n.slice(a[0]+r.length,a[1]),post:n.slice(a[1]+i.length)}};var Oe=(e,t)=>{let n=t.match(e);return n?n[0]:null};const ke=(e,t,n)=>{let r,i,a,o,s,c=n.indexOf(e),l=n.indexOf(t,c+1),u=c;if(c>=0&&l>0){if(e===t)return[c,l];for(r=[],a=n.length;u>=0&&!s;){if(u===c)r.push(u),c=n.indexOf(e,u+1);else if(r.length===1){let e=r.pop();e!==void 0&&(s=[e,l])}else i=r.pop(),i!==void 0&&i<a&&(a=i,o=l),l=n.indexOf(t,u+1);u=c<l&&c>=0?c:l}r.length&&o!==void 0&&(s=[a,o])}return s};var Ae=`\0SLASH`+Math.random()+`\0`,je=`\0OPEN`+Math.random()+`\0`,P=`\0CLOSE`+Math.random()+`\0`,Me=`\0COMMA`+Math.random()+`\0`,Ne=`\0PERIOD`+Math.random()+`\0`,Pe=new RegExp(Ae,`g`),Fe=new RegExp(je,`g`),Ie=new RegExp(P,`g`),Le=new RegExp(Me,`g`),Re=new RegExp(Ne,`g`),ze=/\\\\/g,Be=/\\{/g,Ve=/\\}/g,He=/\\,/g,Ue=/\\./g;function F(e){return isNaN(e)?e.charCodeAt(0):parseInt(e,10)}function We(e){return e.replace(ze,Ae).replace(Be,je).replace(Ve,P).replace(He,Me).replace(Ue,Ne)}function Ge(e){return e.replace(Pe,`\\`).replace(Fe,`{`).replace(Ie,`}`).replace(Le,`,`).replace(Re,`.`)}function I(e){if(!e)return[``];let t=[],n=De(`{`,`}`,e);if(!n)return e.split(`,`);let{pre:r,body:i,post:a}=n,o=r.split(`,`);o[o.length-1]+=`{`+i+`}`;let s=I(a);return a.length&&(o[o.length-1]+=s.shift(),o.push.apply(o,s)),t.push.apply(t,o),t}function Ke(e){return e?(e.slice(0,2)===`{}`&&(e=`\\{\\}`+e.slice(2)),L(We(e),!0).map(Ge)):[]}function qe(e){return`{`+e+`}`}function Je(e){return/^-?0\d/.test(e)}function Ye(e,t){return e<=t}function Xe(e,t){return e>=t}function L(e,t){let n=[],r=De(`{`,`}`,e);if(!r)return[e];let i=r.pre,a=r.post.length?L(r.post,!1):[``];if(/\$$/.test(r.pre))for(let e=0;e<a.length;e++){let t=i+`{`+r.body+`}`+a[e];n.push(t)}else{let o=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),s=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),c=o||s,l=r.body.indexOf(`,`)>=0;if(!c&&!l)return r.post.match(/,(?!,).*\}/)?(e=r.pre+`{`+r.body+P+r.post,L(e)):[e];let u;if(c)u=r.body.split(/\.\./);else if(u=I(r.body),u.length===1&&u[0]!==void 0&&(u=L(u[0],!1).map(qe),u.length===1))return a.map(e=>r.pre+u[0]+e);let d;if(c&&u[0]!==void 0&&u[1]!==void 0){let e=F(u[0]),t=F(u[1]),n=Math.max(u[0].length,u[1].length),r=u.length===3&&u[2]!==void 0?Math.abs(F(u[2])):1,i=Ye;t<e&&(r*=-1,i=Xe);let a=u.some(Je);d=[];for(let o=e;i(o,t);o+=r){let e;if(s)e=String.fromCharCode(o),e===`\\`&&(e=``);else if(e=String(o),a){let t=n-e.length;if(t>0){let n=Array(t+1).join(`0`);e=o<0?`-`+n+e.slice(1):n+e}}d.push(e)}}else{d=[];for(let e=0;e<u.length;e++)d.push.apply(d,L(u[e],!1))}for(let e=0;e<d.length;e++)for(let r=0;r<a.length;r++){let o=i+d[e]+a[r];(!t||c||o)&&n.push(o)}}return n}const R=e=>{if(typeof e!=`string`)throw TypeError(`invalid pattern`);if(e.length>65536)throw TypeError(`pattern is too long`)};var Ze={"[:alnum:]":[`\\p{L}\\p{Nl}\\p{Nd}`,!0],"[:alpha:]":[`\\p{L}\\p{Nl}`,!0],"[:ascii:]":[`\\x00-\\x7f`,!1],"[:blank:]":[`\\p{Zs}\\t`,!0],"[:cntrl:]":[`\\p{Cc}`,!0],"[:digit:]":[`\\p{Nd}`,!0],"[:graph:]":[`\\p{Z}\\p{C}`,!0,!0],"[:lower:]":[`\\p{Ll}`,!0],"[:print:]":[`\\p{C}`,!0],"[:punct:]":[`\\p{P}`,!0],"[:space:]":[`\\p{Z}\\t\\r\\n\\v\\f`,!0],"[:upper:]":[`\\p{Lu}`,!0],"[:word:]":[`\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}`,!0],"[:xdigit:]":[`A-Fa-f0-9`,!1]},z=e=>e.replace(/[[\]\\-]/g,`\\$&`),Qe=e=>e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,`\\$&`),B=e=>e.join(``);const $e=(e,t)=>{let n=t;if(e.charAt(n)!==`[`)throw Error(`not in a brace expression`);let r=[],i=[],a=n+1,o=!1,s=!1,c=!1,l=!1,u=n,d=``;WHILE:for(;a<e.length;){let t=e.charAt(a);if((t===`!`||t===`^`)&&a===n+1){l=!0,a++;continue}if(t===`]`&&o&&!c){u=a+1;break}if(o=!0,t===`\\`&&!c){c=!0,a++;continue}if(t===`[`&&!c){for(let[t,[o,c,l]]of Object.entries(Ze))if(e.startsWith(t,a)){if(d)return[`$.`,!1,e.length-n,!0];a+=t.length,l?i.push(o):r.push(o),s||=c;continue WHILE}}if(c=!1,d){t>d?r.push(z(d)+`-`+z(t)):t===d&&r.push(z(t)),d=``,a++;continue}if(e.startsWith(`-]`,a+1)){r.push(z(t+`-`)),a+=2;continue}if(e.startsWith(`-`,a+1)){d=t,a+=2;continue}r.push(z(t)),a++}if(u<a)return[``,!1,0,!1];if(!r.length&&!i.length)return[`$.`,!1,e.length-n,!0];if(i.length===0&&r.length===1&&/^\\?.$/.test(r[0])&&!l){let e=r[0].length===2?r[0].slice(-1):r[0];return[Qe(e),!1,u-n,!1]}let f=`[`+(l?`^`:``)+B(r)+`]`,p=`[`+(l?``:`^`)+B(i)+`]`;return[r.length&&i.length?`(`+f+`|`+p+`)`:r.length?f:p,s,u-n,!0]},V=(e,{windowsPathsNoEscape:t=!1}={})=>t?e.replace(/\[([^\/\\])\]/g,`$1`):e.replace(/((?!\\).|^)\[([^\/\\])\]/g,`$1$2`).replace(/\\([^\/])/g,`$1`);var et=new Set([`!`,`?`,`+`,`*`,`@`]),H=e=>et.has(e),tt=`(?!(?:^|/)\\.\\.?(?:$|/))`,U=`(?!\\.)`,nt=new Set([`[`,`.`]),rt=new Set([`..`,`.`]),it=new Set(`().*{}+?[]^$\\!`),at=e=>e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,`\\$&`),W=`[^/]`,ot=W+`*?`,st=W+`+?`,ct=class e{type;#root;#hasMagic;#uflag=!1;#parts=[];#parent;#parentIndex;#negs;#filledNegs=!1;#options;#toString;#emptyExt=!1;constructor(e,t,n={}){this.type=e,e&&(this.#hasMagic=!0),this.#parent=t,this.#root=this.#parent?this.#parent.#root:this,this.#options=this.#root===this?n:this.#root.#options,this.#negs=this.#root===this?[]:this.#root.#negs,e===`!`&&!this.#root.#filledNegs&&this.#negs.push(this),this.#parentIndex=this.#parent?this.#parent.#parts.length:0}get hasMagic(){if(this.#hasMagic!==void 0)return this.#hasMagic;for(let e of this.#parts){if(typeof e==`string`)continue;if(e.type||e.hasMagic)return this.#hasMagic=!0}return this.#hasMagic}toString(){return this.#toString===void 0?this.type?this.#toString=this.type+`(`+this.#parts.map(e=>String(e)).join(`|`)+`)`:this.#toString=this.#parts.map(e=>String(e)).join(``):this.#toString}#fillNegs(){if(this!==this.#root)throw Error(`should only call on root`);if(this.#filledNegs)return this;this.toString(),this.#filledNegs=!0;let e;for(;e=this.#negs.pop();){if(e.type!==`!`)continue;let t=e,n=t.#parent;for(;n;){for(let r=t.#parentIndex+1;!n.type&&r<n.#parts.length;r++)for(let t of e.#parts){if(typeof t==`string`)throw Error(`string part in extglob AST??`);t.copyIn(n.#parts[r])}t=n,n=t.#parent}}return this}push(...t){for(let n of t){if(n===``)continue;if(typeof n!=`string`&&!(n instanceof e&&n.#parent===this))throw Error(`invalid part: `+n);this.#parts.push(n)}}toJSON(){let e=this.type===null?this.#parts.slice().map(e=>typeof e==`string`?e:e.toJSON()):[this.type,...this.#parts.map(e=>e.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#root||this.#root.#filledNegs&&this.#parent?.type===`!`)&&e.push({}),e}isStart(){if(this.#root===this)return!0;if(!this.#parent?.isStart())return!1;if(this.#parentIndex===0)return!0;let t=this.#parent;for(let n=0;n<this.#parentIndex;n++){let r=t.#parts[n];if(!(r instanceof e&&r.type===`!`))return!1}return!0}isEnd(){if(this.#root===this||this.#parent?.type===`!`)return!0;if(!this.#parent?.isEnd())return!1;if(!this.type)return this.#parent?.isEnd();let e=this.#parent?this.#parent.#parts.length:0;return this.#parentIndex===e-1}copyIn(e){typeof e==`string`?this.push(e):this.push(e.clone(this))}clone(t){let n=new e(this.type,t);for(let e of this.#parts)n.copyIn(e);return n}static#parseAST(t,n,r,i){let a=!1,o=!1,s=-1,c=!1;if(n.type===null){let l=r,u=``;for(;l<t.length;){let r=t.charAt(l++);if(a||r===`\\`){a=!a,u+=r;continue}if(o){l===s+1?(r===`^`||r===`!`)&&(c=!0):r===`]`&&!(l===s+2&&c)&&(o=!1),u+=r;continue}else if(r===`[`){o=!0,s=l,c=!1,u+=r;continue}if(!i.noext&&H(r)&&t.charAt(l)===`(`){n.push(u),u=``;let a=new e(r,n);l=e.#parseAST(t,a,l,i),n.push(a);continue}u+=r}return n.push(u),l}let l=r+1,u=new e(null,n),d=[],f=``;for(;l<t.length;){let r=t.charAt(l++);if(a||r===`\\`){a=!a,f+=r;continue}if(o){l===s+1?(r===`^`||r===`!`)&&(c=!0):r===`]`&&!(l===s+2&&c)&&(o=!1),f+=r;continue}else if(r===`[`){o=!0,s=l,c=!1,f+=r;continue}if(H(r)&&t.charAt(l)===`(`){u.push(f),f=``;let n=new e(r,u);u.push(n),l=e.#parseAST(t,n,l,i);continue}if(r===`|`){u.push(f),f=``,d.push(u),u=new e(null,n);continue}if(r===`)`)return f===``&&n.#parts.length===0&&(n.#emptyExt=!0),u.push(f),f=``,n.push(...d,u),l;f+=r}return n.type=null,n.#hasMagic=void 0,n.#parts=[t.substring(r-1)],l}static fromGlob(t,n={}){let r=new e(null,void 0,n);return e.#parseAST(t,r,0,n),r}toMMPattern(){if(this!==this.#root)return this.#root.toMMPattern();let e=this.toString(),[t,n,r,i]=this.toRegExpSource();if(!(r||this.#hasMagic||this.#options.nocase&&!this.#options.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;let a=(this.#options.nocase?`i`:``)+(i?`u`:``);return Object.assign(RegExp(`^${t}$`,a),{_src:t,_glob:e})}get options(){return this.#options}toRegExpSource(t){let n=t??!!this.#options.dot;if(this.#root===this&&this.#fillNegs(),!this.type){let r=this.isStart()&&this.isEnd(),i=this.#parts.map(n=>{let[i,a,o,s]=typeof n==`string`?e.#parseGlob(n,this.#hasMagic,r):n.toRegExpSource(t);return this.#hasMagic=this.#hasMagic||o,this.#uflag=this.#uflag||s,i}).join(``),a=``;if(this.isStart()&&typeof this.#parts[0]==`string`&&!(this.#parts.length===1&&rt.has(this.#parts[0]))){let e=nt,r=n&&e.has(i.charAt(0))||i.startsWith(`\\.`)&&e.has(i.charAt(2))||i.startsWith(`\\.\\.`)&&e.has(i.charAt(4)),o=!n&&!t&&e.has(i.charAt(0));a=r?tt:o?U:``}let o=``;return this.isEnd()&&this.#root.#filledNegs&&this.#parent?.type===`!`&&(o=`(?:$|\\/)`),[a+i+o,V(i),this.#hasMagic=!!this.#hasMagic,this.#uflag]}let r=this.type===`*`||this.type===`+`,i=this.type===`!`?`(?:(?!(?:`:`(?:`,a=this.#partsToRegExp(n);if(this.isStart()&&this.isEnd()&&!a&&this.type!==`!`){let e=this.toString();return this.#parts=[e],this.type=null,this.#hasMagic=void 0,[e,V(this.toString()),!1,!1]}let o=!r||t||n?``:this.#partsToRegExp(!0);o===a&&(o=``),o&&(a=`(?:${a})(?:${o})*?`);let s=``;if(this.type===`!`&&this.#emptyExt)s=(this.isStart()&&!n?U:``)+st;else{let e=this.type===`!`?`))`+(this.isStart()&&!n&&!t?U:``)+ot+`)`:this.type===`@`?`)`:this.type===`?`?`)?`:this.type===`+`&&o?`)`:this.type===`*`&&o?`)?`:`)${this.type}`;s=i+a+e}return[s,V(a),this.#hasMagic=!!this.#hasMagic,this.#uflag]}#partsToRegExp(e){return this.#parts.map(t=>{if(typeof t==`string`)throw Error(`string type in extglob ast??`);let[n,r,i,a]=t.toRegExpSource(e);return this.#uflag=this.#uflag||a,n}).filter(e=>!(this.isStart()&&this.isEnd())||!!e).join(`|`)}static#parseGlob(e,t,n=!1){let r=!1,i=``,a=!1;for(let o=0;o<e.length;o++){let s=e.charAt(o);if(r){r=!1,i+=(it.has(s)?`\\`:``)+s;continue}if(s===`\\`){o===e.length-1?i+=`\\\\`:r=!0;continue}if(s===`[`){let[n,r,s,c]=$e(e,o);if(s){i+=n,a||=r,o+=s-1,t||=c;continue}}if(s===`*`){n&&e===`*`?i+=st:i+=ot,t=!0;continue}if(s===`?`){i+=W,t=!0;continue}i+=at(s)}return[i,V(e),!!t,a]}};const lt=(e,{windowsPathsNoEscape:t=!1}={})=>t?e.replace(/[?*()[\]]/g,`[$&]`):e.replace(/[?*()[\]\\]/g,`\\$&`),G=(e,t,n={})=>(R(t),!n.nocomment&&t.charAt(0)===`#`?!1:new Y(t,n).match(e));var ut=/^\*+([^+@!?\*\[\(]*)$/,dt=e=>t=>!t.startsWith(`.`)&&t.endsWith(e),ft=e=>t=>t.endsWith(e),pt=e=>(e=e.toLowerCase(),t=>!t.startsWith(`.`)&&t.toLowerCase().endsWith(e)),mt=e=>(e=e.toLowerCase(),t=>t.toLowerCase().endsWith(e)),ht=/^\*+\.\*+$/,gt=e=>!e.startsWith(`.`)&&e.includes(`.`),_t=e=>e!==`.`&&e!==`..`&&e.includes(`.`),vt=/^\.\*+$/,yt=e=>e!==`.`&&e!==`..`&&e.startsWith(`.`),bt=/^\*+$/,xt=e=>e.length!==0&&!e.startsWith(`.`),St=e=>e.length!==0&&e!==`.`&&e!==`..`,Ct=/^\?+([^+@!?\*\[\(]*)?$/,wt=([e,t=``])=>{let n=Ot([e]);return t?(t=t.toLowerCase(),e=>n(e)&&e.toLowerCase().endsWith(t)):n},Tt=([e,t=``])=>{let n=kt([e]);return t?(t=t.toLowerCase(),e=>n(e)&&e.toLowerCase().endsWith(t)):n},Et=([e,t=``])=>{let n=kt([e]);return t?e=>n(e)&&e.endsWith(t):n},Dt=([e,t=``])=>{let n=Ot([e]);return t?e=>n(e)&&e.endsWith(t):n},Ot=([e])=>{let t=e.length;return e=>e.length===t&&!e.startsWith(`.`)},kt=([e])=>{let t=e.length;return e=>e.length===t&&e!==`.`&&e!==`..`},At=typeof process==`object`&&process?{}.__MINIMATCH_TESTING_PLATFORM__||process.platform:`posix`,jt={win32:{sep:`\\`},posix:{sep:`/`}};G.sep=At===`win32`?jt.win32.sep:jt.posix.sep;const K=Symbol(`globstar **`);G.GLOBSTAR=K;var Mt=`[^/]*?`,Nt=`(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?`,Pt=`(?:(?!(?:\\/|^)\\.).)*?`;G.filter=(e,t={})=>n=>G(n,e,t);var q=(e,t={})=>Object.assign({},e,t);G.defaults=e=>{if(!e||typeof e!=`object`||!Object.keys(e).length)return G;let t=G;return Object.assign((n,r,i={})=>t(n,r,q(e,i)),{Minimatch:class extends t.Minimatch{constructor(t,n={}){super(t,q(e,n))}static defaults(n){return t.defaults(q(e,n)).Minimatch}},AST:class extends t.AST{constructor(t,n,r={}){super(t,n,q(e,r))}static fromGlob(n,r={}){return t.AST.fromGlob(n,q(e,r))}},unescape:(n,r={})=>t.unescape(n,q(e,r)),escape:(n,r={})=>t.escape(n,q(e,r)),filter:(n,r={})=>t.filter(n,q(e,r)),defaults:n=>t.defaults(q(e,n)),makeRe:(n,r={})=>t.makeRe(n,q(e,r)),braceExpand:(n,r={})=>t.braceExpand(n,q(e,r)),match:(n,r,i={})=>t.match(n,r,q(e,i)),sep:t.sep,GLOBSTAR:K})};const J=(e,t={})=>(R(e),t.nobrace||!/\{(?:(?!\{).)*\}/.test(e)?[e]:Ke(e));G.braceExpand=J,G.makeRe=(e,t={})=>new Y(e,t).makeRe(),G.match=(e,t,n={})=>{let r=new Y(t,n);return e=e.filter(e=>r.match(e)),r.options.nonull&&!e.length&&e.push(t),e};var Ft=/[?*]|[+@!]\(.*?\)|\[|\]/,It=e=>e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,`\\$&`),Y=class{options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,t={}){R(e),t||={},this.options=t,this.pattern=e,this.platform=t.platform||At,this.isWindows=this.platform===`win32`,this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,`/`)),this.preserveMultipleSlashes=!!t.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!t.nonegate,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=t.windowsNoMagicRoot===void 0?!!(this.isWindows&&this.nocase):t.windowsNoMagicRoot,this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let t of e)if(typeof t!=`string`)return!0;return!1}debug(...e){}make(){let e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)===`#`){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],t.debug&&(this.debug=(...e)=>console.error(...e)),this.debug(this.pattern,this.globSet);let n=this.globSet.map(e=>this.slashSplit(e));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let r=this.globParts.map((e,t,n)=>{if(this.isWindows&&this.windowsNoMagicRoot){let t=e[0]===``&&e[1]===``&&(e[2]===`?`||!Ft.test(e[2]))&&!Ft.test(e[3]),n=/^[a-z]:/i.test(e[0]);if(t)return[...e.slice(0,4),...e.slice(4).map(e=>this.parse(e))];if(n)return[e[0],...e.slice(1).map(e=>this.parse(e))]}return e.map(e=>this.parse(e))});if(this.debug(this.pattern,r),this.set=r.filter(e=>e.indexOf(!1)===-1),this.isWindows)for(let e=0;e<this.set.length;e++){let t=this.set[e];t[0]===``&&t[1]===``&&this.globParts[e][2]===`?`&&typeof t[3]==`string`&&/^[a-z]:$/i.test(t[3])&&(t[2]=`?`)}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let t=0;t<e.length;t++)for(let n=0;n<e[t].length;n++)e[t][n]===`**`&&(e[t][n]=`*`);let{optimizationLevel:t=1}=this.options;return t>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):e=t>=1?this.levelOneOptimize(e):this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(e=>{let t=-1;for(;(t=e.indexOf(`**`,t+1))!==-1;){let n=t;for(;e[n+1]===`**`;)n++;n!==t&&e.splice(t,n-t)}return e})}levelOneOptimize(e){return e.map(e=>(e=e.reduce((e,t)=>{let n=e[e.length-1];return t===`**`&&n===`**`?e:t===`..`&&n&&n!==`..`&&n!==`.`&&n!==`**`?(e.pop(),e):(e.push(t),e)},[]),e.length===0?[``]:e))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let t=!1;do{if(t=!1,!this.preserveMultipleSlashes){for(let n=1;n<e.length-1;n++){let r=e[n];n===1&&r===``&&e[0]===``||(r===`.`||r===``)&&(t=!0,e.splice(n,1),n--)}e[0]===`.`&&e.length===2&&(e[1]===`.`||e[1]===``)&&(t=!0,e.pop())}let n=0;for(;(n=e.indexOf(`..`,n+1))!==-1;){let r=e[n-1];r&&r!==`.`&&r!==`..`&&r!==`**`&&(t=!0,e.splice(n-1,2),n-=2)}}while(t);return e.length===0?[``]:e}firstPhasePreProcess(e){let t=!1;do{t=!1;for(let n of e){let r=-1;for(;(r=n.indexOf(`**`,r+1))!==-1;){let i=r;for(;n[i+1]===`**`;)i++;i>r&&n.splice(r+1,i-r);let a=n[r+1],o=n[r+2],s=n[r+3];if(a!==`..`||!o||o===`.`||o===`..`||!s||s===`.`||s===`..`)continue;t=!0,n.splice(r,1);let c=n.slice(0);c[r]=`**`,e.push(c),r--}if(!this.preserveMultipleSlashes){for(let e=1;e<n.length-1;e++){let r=n[e];e===1&&r===``&&n[0]===``||(r===`.`||r===``)&&(t=!0,n.splice(e,1),e--)}n[0]===`.`&&n.length===2&&(n[1]===`.`||n[1]===``)&&(t=!0,n.pop())}let i=0;for(;(i=n.indexOf(`..`,i+1))!==-1;){let e=n[i-1];if(e&&e!==`.`&&e!==`..`&&e!==`**`){t=!0;let e=i===1&&n[i+1]===`**`?[`.`]:[];n.splice(i-1,2,...e),n.length===0&&n.push(``),i-=2}}}}while(t);return e}secondPhasePreProcess(e){for(let t=0;t<e.length-1;t++)for(let n=t+1;n<e.length;n++){let r=this.partsMatch(e[t],e[n],!this.preserveMultipleSlashes);if(r){e[t]=[],e[n]=r;break}}return e.filter(e=>e.length)}partsMatch(e,t,n=!1){let r=0,i=0,a=[],o=``;for(;r<e.length&&i<t.length;)if(e[r]===t[i])a.push(o===`b`?t[i]:e[r]),r++,i++;else if(n&&e[r]===`**`&&t[i]===e[r+1])a.push(e[r]),r++;else if(n&&t[i]===`**`&&e[r]===t[i+1])a.push(t[i]),i++;else if(e[r]===`*`&&t[i]&&(this.options.dot||!t[i].startsWith(`.`))&&t[i]!==`**`){if(o===`b`)return!1;o=`a`,a.push(e[r]),r++,i++}else if(t[i]===`*`&&e[r]&&(this.options.dot||!e[r].startsWith(`.`))&&e[r]!==`**`){if(o===`a`)return!1;o=`b`,a.push(t[i]),r++,i++}else return!1;return e.length===t.length&&a}parseNegate(){if(this.nonegate)return;let e=this.pattern,t=!1,n=0;for(let r=0;r<e.length&&e.charAt(r)===`!`;r++)t=!t,n++;n&&(this.pattern=e.slice(n)),this.negate=t}matchOne(e,t,n=!1){let r=this.options;if(this.isWindows){let n=typeof e[0]==`string`&&/^[a-z]:$/i.test(e[0]),r=!n&&e[0]===``&&e[1]===``&&e[2]===`?`&&/^[a-z]:$/i.test(e[3]),i=typeof t[0]==`string`&&/^[a-z]:$/i.test(t[0]),a=!i&&t[0]===``&&t[1]===``&&t[2]===`?`&&typeof t[3]==`string`&&/^[a-z]:$/i.test(t[3]),o=r?3:n?0:void 0,s=a?3:i?0:void 0;if(typeof o==`number`&&typeof s==`number`){let[n,r]=[e[o],t[s]];n.toLowerCase()===r.toLowerCase()&&(t[s]=n,s>o?t=t.slice(s):o>s&&(e=e.slice(o)))}}let{optimizationLevel:i=1}=this.options;i>=2&&(e=this.levelTwoFileOptimize(e)),this.debug(`matchOne`,this,{file:e,pattern:t}),this.debug(`matchOne`,e.length,t.length);for(var a=0,o=0,s=e.length,c=t.length;a<s&&o<c;a++,o++){this.debug(`matchOne loop`);var l=t[o],u=e[a];if(this.debug(t,l,u),l===!1)return!1;if(l===K){this.debug(`GLOBSTAR`,[t,l,u]);var d=a,f=o+1;if(f===c){for(this.debug(`** at the end`);a<s;a++)if(e[a]===`.`||e[a]===`..`||!r.dot&&e[a].charAt(0)===`.`)return!1;return!0}for(;d<s;){var p=e[d];if(this.debug(`
globstar while`,e,d,t,f,p),this.matchOne(e.slice(d),t.slice(f),n))return this.debug(`globstar found match!`,d,s,p),!0;if(p===`.`||p===`..`||!r.dot&&p.charAt(0)===`.`){this.debug(`dot detected!`,e,d,t,f);break}this.debug(`globstar swallow a segment, and continue`),d++}return!!(n&&(this.debug(`
>>> no match, partial?`,e,d,t,f),d===s))}let i;if(typeof l==`string`?(i=u===l,this.debug(`string match`,l,u,i)):(i=l.test(u),this.debug(`pattern match`,l,u,i)),!i)return!1}if(a===s&&o===c)return!0;if(a===s)return n;if(o===c)return a===s-1&&e[a]===``;throw Error(`wtf?`)}braceExpand(){return J(this.pattern,this.options)}parse(e){R(e);let t=this.options;if(e===`**`)return K;if(e===``)return``;let n,r=null;(n=e.match(bt))?r=t.dot?St:xt:(n=e.match(ut))?r=(t.nocase?t.dot?mt:pt:t.dot?ft:dt)(n[1]):(n=e.match(Ct))?r=(t.nocase?t.dot?Tt:wt:t.dot?Et:Dt)(n):(n=e.match(ht))?r=t.dot?_t:gt:(n=e.match(vt))&&(r=yt);let i=ct.fromGlob(e,this.options).toMMPattern();return r&&typeof i==`object`&&Reflect.defineProperty(i,`test`,{value:r}),i}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let t=this.options,n=t.noglobstar?Mt:t.dot?Nt:Pt,r=new Set(t.nocase?[`i`]:[]),i=e.map(e=>{let t=e.map(e=>{if(e instanceof RegExp)for(let t of e.flags.split(``))r.add(t);return typeof e==`string`?It(e):e===K?K:e._src});return t.forEach((e,r)=>{let i=t[r+1],a=t[r-1];e!==K||a===K||(a===void 0?i!==void 0&&i!==K?t[r+1]=`(?:\\/|`+n+`\\/)?`+i:t[r]=n:i===void 0?t[r-1]=a+`(?:\\/|`+n+`)?`:i!==K&&(t[r-1]=a+`(?:\\/|\\/`+n+`\\/)`+i,t[r+1]=K))}),t.filter(e=>e!==K).join(`/`)}).join(`|`),[a,o]=e.length>1?[`(?:`,`)`]:[``,``];i=`^`+a+i+o+`$`,this.negate&&(i=`^(?!`+i+`).+$`);try{this.regexp=new RegExp(i,[...r].join(``))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split(`/`):this.isWindows&&/^\/\/[^\/]+/.test(e)?[``,...e.split(/\/+/)]:e.split(/\/+/)}match(e,t=this.partial){if(this.debug(`match`,e,this.pattern),this.comment)return!1;if(this.empty)return e===``;if(e===`/`&&t)return!0;let n=this.options;this.isWindows&&(e=e.split(`\\`).join(`/`));let r=this.slashSplit(e);this.debug(this.pattern,`split`,r);let i=this.set;this.debug(this.pattern,`set`,i);let a=r[r.length-1];if(!a)for(let e=r.length-2;!a&&e>=0;e--)a=r[e];for(let e=0;e<i.length;e++){let o=i[e],s=r;if(n.matchBase&&o.length===1&&(s=[a]),this.matchOne(s,o,t))return n.flipNegate?!0:!this.negate}return n.flipNegate?!1:this.negate}static defaults(e){return G.defaults(e).Minimatch}};G.AST=ct,G.Minimatch=Y,G.escape=lt,G.unescape=V;function Lt(e){let t=Object.values(e.definitions)[0]?.properties||{},n=new Set([t.id?`id`:void 0,t.title?`title`:void 0,...Object.keys(t).sort()].filter(Boolean));return Array.from(n)}const X=(e,t)=>{let n;return{collection:Object.values(t).find(t=>{if(!t.source||t.source.length===0)return;let r=j(e);return(r===`/`?[`index.yml`,`index.yaml`,`index.md`,`index.json`]:[r]).some(e=>(n=t.source.find(t=>{let n=G(e,t.include),r=t.exclude?.some(t=>G(e,t));return n&&!r}),n))}),matchedSource:n}},Rt=(e,t)=>{let n;return{collection:Object.values(t).find(t=>{if(!(!t.source||t.source.length===0))return n=t.source.find(t=>{if(!t.prefix)return;let n=M(t.prefix,!0);if(!e.startsWith(n))return;if(e===`/`){let r=[`index.yml`,`index.yaml`,`index.md`,`index.json`];return(e===`/`?r:r.map(e=>m(p(n,e)))).some(e=>{let n=G(e,M(t.include)),r=t.exclude?.some(t=>G(e,M(t)));return n&&!r})}let{fixed:r}=Te(t),i=M(r||``),a=e.substring(n.length),o=p(i,a),s=e=>e.replace(/\.[^/.]+$/,``),c=G(o,s(M(t.include))),l=t.exclude?.some(e=>G(o,s(M(e))));return c&&!l}),n}),matchedSource:n}};function zt(e,t){let n=Ut(e,t),r=0;return`INSERT INTO ${e.tableName} VALUES (${`?, `.repeat(n.length).slice(0,-2)})`.replace(/\?/g,()=>n[r++])}function Bt(e,t,n){let r=Vt(e,t),i=zt(e,n);return`${r}; ${i}`}function Vt(e,t){return`DELETE FROM ${e.tableName} WHERE stem = '${t}';`}function Ht(e,t,n){return`SELECT * FROM ${e.tableName} WHERE ${t} = '${n}';`}function Ut(e,t){let n=[],r=[],i=e.schema.definitions[e.name].properties;return Lt(e.schema).forEach(a=>{let o=i[a],s=e.fields[a],c=o?.default===void 0?`NULL`:o.default,l=t[a]===void 0?c:t[a];n.push(a),s===`json`?r.push(`'${JSON.stringify(l).replace(/'/g,`''`)}'`):s===`string`||[`string`,`enum`].includes(o.type)?[`data`,`datetime`].includes(o.format)?r.push(l===`NULL`?c:`'${new Date(l).toISOString()}'`):r.push(`'${String(l).replace(/\n/g,`\\n`).replace(/'/g,`''`)}'`):s===`boolean`?r.push(l===`NULL`?l:!!l):r.push(l)}),r.push(`'${u(r)}'`),r}const Wt=[`https://nuxt.studio`,`https://dev.nuxt.studio`],Z={nuxtcore:{name:`nuxtcore`,pascalName:`Nuxtcore`,tableName:`_content_nuxtcore`,source:[],type:`page`,fields:{id:`string`,title:`string`,body:`json`,description:`string`,extension:`string`,links:`json`,meta:`json`,navigation:`json`,path:`string`,seo:`json`,stem:`string`,titleTemplate:`string`},schema:{$schema:`http://json-schema.org/draft-07/schema#`,$ref:`#/definitions/__SCHEMA__`,definitions:{nuxtcore:{type:`object`,properties:{id:{type:`string`},stem:{type:`string`},extension:{type:`string`,enum:[`md`,`yaml`,`yml`,`json`,`csv`,`xml`]},meta:{type:`object`,additionalProperties:{}},path:{type:`string`},title:{type:`string`},description:{type:`string`},seo:{allOf:[{type:`object`,properties:{title:{type:`string`},description:{type:`string`}}},{type:`object`,additionalProperties:{}}],default:{}},body:{type:`object`,properties:{type:{type:`string`},children:{},toc:{}},required:[`type`],additionalProperties:!1},navigation:{anyOf:[{type:`boolean`},{type:`object`,properties:{title:{type:`string`},description:{type:`string`},icon:{type:`string`,$content:{editor:{input:`icon`}}}},required:[`title`,`description`,`icon`],additionalProperties:!1}],default:!0},titleTemplate:{type:`string`},links:{type:`array`,items:{type:`object`,properties:{label:{type:`string`},icon:{type:`string`},trailingIcon:{type:`string`},to:{type:`string`},color:{type:`string`,enum:[`primary`,`neutral`,`success`,`warning`,`error`,`info`]},size:{type:`string`,enum:[`xs`,`sm`,`md`,`lg`,`xl`]},variant:{type:`string`,enum:[`solid`,`outline`,`subtle`,`soft`,`ghost`,`link`]},id:{type:`string`},target:{type:`string`,enum:[`_blank`,`_self`]}},required:[`label`],additionalProperties:!1}}},required:[`id`,`stem`,`extension`,`meta`,`path`,`title`,`description`,`body`,`links`],additionalProperties:!1}}},tableDefinition:`CREATE TABLE IF NOT EXISTS _content_nuxtcore (id TEXT PRIMARY KEY, "title" VARCHAR, "body" TEXT, "description" VARCHAR, "extension" VARCHAR, "links" TEXT, "meta" TEXT, "navigation" TEXT DEFAULT true, "path" VARCHAR, "seo" TEXT DEFAULT '{}', "stem" VARCHAR, "titleTemplate" VARCHAR NULL, "__hash__" TEXT UNIQUE);`},nuxtcontent:{name:`nuxtcontent`,pascalName:`Nuxtcontent`,tableName:`_content_nuxtcontent`,source:[],type:`page`,fields:{id:`string`,title:`string`,body:`json`,description:`string`,extension:`string`,links:`json`,meta:`json`,navigation:`json`,path:`string`,seo:`json`,stem:`string`,titleTemplate:`string`},schema:{$schema:`http://json-schema.org/draft-07/schema#`,$ref:`#/definitions/__SCHEMA__`,definitions:{nuxtcontent:{type:`object`,properties:{id:{type:`string`},stem:{type:`string`},extension:{type:`string`,enum:[`md`,`yaml`,`yml`,`json`,`csv`,`xml`]},meta:{type:`object`,additionalProperties:{}},path:{type:`string`},title:{type:`string`},description:{type:`string`},seo:{allOf:[{type:`object`,properties:{title:{type:`string`},description:{type:`string`}}},{type:`object`,additionalProperties:{}}],default:{}},body:{type:`object`,properties:{type:{type:`string`},children:{},toc:{}},required:[`type`],additionalProperties:!1},navigation:{anyOf:[{type:`boolean`},{type:`object`,properties:{title:{type:`string`},description:{type:`string`},icon:{type:`string`,$content:{editor:{input:`icon`}}}},required:[`title`,`description`,`icon`],additionalProperties:!1}],default:!0},titleTemplate:{type:`string`},links:{type:`array`,items:{type:`object`,properties:{label:{type:`string`},icon:{type:`string`},trailingIcon:{type:`string`},to:{type:`string`},color:{type:`string`,enum:[`primary`,`neutral`,`success`,`warning`,`error`,`info`]},size:{type:`string`,enum:[`xs`,`sm`,`md`,`lg`,`xl`]},variant:{type:`string`,enum:[`solid`,`outline`,`subtle`,`soft`,`ghost`,`link`]},id:{type:`string`},target:{type:`string`,enum:[`_blank`,`_self`]}},required:[`label`],additionalProperties:!1}}},required:[`id`,`stem`,`extension`,`meta`,`path`,`title`,`description`,`body`,`links`],additionalProperties:!1}}},tableDefinition:`CREATE TABLE IF NOT EXISTS _content_nuxtcontent (id TEXT PRIMARY KEY, "title" VARCHAR, "body" TEXT, "description" VARCHAR, "extension" VARCHAR, "links" TEXT, "meta" TEXT, "navigation" TEXT DEFAULT true, "path" VARCHAR, "seo" TEXT DEFAULT '{}', "stem" VARCHAR, "titleTemplate" VARCHAR NULL, "__hash__" TEXT UNIQUE);`},nuxtui:{name:`nuxtui`,pascalName:`Nuxtui`,tableName:`_content_nuxtui`,source:[],type:`page`,fields:{id:`string`,title:`string`,body:`json`,category:`string`,description:`string`,extension:`string`,framework:`string`,links:`json`,meta:`json`,module:`string`,navigation:`json`,path:`string`,seo:`json`,stem:`string`},schema:{$schema:`http://json-schema.org/draft-07/schema#`,$ref:`#/definitions/__SCHEMA__`,definitions:{nuxtui:{type:`object`,properties:{id:{type:`string`},stem:{type:`string`},extension:{type:`string`,enum:[`md`,`yaml`,`yml`,`json`,`csv`,`xml`]},meta:{type:`object`,additionalProperties:{}},path:{type:`string`},title:{type:`string`},description:{type:`string`},seo:{allOf:[{type:`object`,properties:{title:{type:`string`},description:{type:`string`}}},{type:`object`,additionalProperties:{}}],default:{}},body:{type:`object`,properties:{type:{type:`string`},children:{},toc:{}},required:[`type`],additionalProperties:!1},navigation:{type:`object`,properties:{title:{type:`string`}},additionalProperties:!1},category:{type:`string`,enum:[`layout`,`form`,`element`,`navigation`,`data`,`overlay`]},framework:{type:`string`},module:{type:`string`},links:{type:`array`,items:{type:`object`,properties:{label:{type:`string`},icon:{type:`string`},avatar:{type:`object`,properties:{src:{type:`string`},alt:{type:`string`}},required:[`src`,`alt`],additionalProperties:!1},to:{type:`string`},target:{type:`string`}},required:[`label`,`icon`,`to`],additionalProperties:!1}}},required:[`id`,`stem`,`extension`,`meta`,`path`,`title`,`description`,`body`,`navigation`,`links`],additionalProperties:!1}}},tableDefinition:`CREATE TABLE IF NOT EXISTS _content_nuxtui (id TEXT PRIMARY KEY, "title" VARCHAR, "body" TEXT, "category" VARCHAR NULL, "description" VARCHAR, "extension" VARCHAR, "framework" VARCHAR NULL, "links" TEXT, "meta" TEXT, "module" VARCHAR NULL, "navigation" TEXT, "path" VARCHAR, "seo" TEXT DEFAULT '{}', "stem" VARCHAR, "__hash__" TEXT UNIQUE);`},info:{name:`info`,pascalName:`Info`,tableName:`_content_info`,source:[],type:`data`,fields:{},schema:{$ref:`#/definitions/info`,definitions:{},$schema:`http://json-schema.org/draft-07/schema#`},tableDefinition:`CREATE TABLE IF NOT EXISTS _content_info (id TEXT PRIMARY KEY, "ready" BOOLEAN, "structureVersion" VARCHAR, "version" VARCHAR, "__hash__" TEXT UNIQUE);`}};var Q=y(!1),Gt=Se(()=>JSON.parse(JSON.stringify(a()))),Kt=async e=>{let t=be(e.files,e.additions,e.deletions),n=t.filter(e=>![A.appConfig,A.appConfigV4,A.nuxtConfig].includes(e.path));for(let e of Object.values(Z))await T(e.name).exec(e.tableDefinition);for(let e of n)await qt(Z,e);let r=t.find(e=>[A.appConfig,A.appConfigV4].includes(e.path));r&&$(r.parsed),w(),Q.value=!0},qt=async(e,t)=>{let{collection:n,matchedSource:r}=X(t.path,e);if(!n||!r){console.warn(`Content Preview: collection not found for file: ${t.path}, skipping insertion.`);return}let i=T(n.name),a=Ee(t,n,r),o=zt(n,a);await i.exec(o)},$=e=>{let t=_(),n=x(t,a);we(n,xe(e||{},Gt)),e||Ce(n,Gt)};function Jt(){let e=b().public.preview||{},t=window.sessionStorage.getItem(`previewToken`),n=document.createElement(`div`);n.id=`__nuxt_preview_wrapper`,document.body.appendChild(n),ee(ce,{previewToken:t,api:window.sessionStorage.getItem(`previewAPI`)||e?.api,initializePreview:Kt}).mount(n)}function Yt(){let e=_(),t=b().public.preview;if(!window.parent||window.self===window.parent)return;let n=o(),r=d();window.addEventListener(`keydown`,e=>{(e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)&&window.parent.postMessage({type:`nuxt-content:preview:keydown`,payload:{key:e.key,metaKey:e.metaKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,altKey:e.altKey}},`*`)}),window.addEventListener(`message`,async e=>{if(!Q.value)return;let i=t?.iframeMessagingAllowedOrigins?.split(`,`).map(e=>e.trim())||[];if(![`http://localhost:3000`,...Wt,...i].includes(e.origin))return;let{type:a,payload:o={},navigate:s}=e.data||{};switch(a){case`nuxt-content:editor:file-selected`:await c(o.path);break;case`nuxt-content:editor:file-changed`:case`nuxt-content:editor:media-changed`:{let{additions:e=[],deletions:t=[]}=o;for(let t of e)await l(t,s);for(let e of t)await u(e.path);Xt();break}case`nuxt-content:config:file-changed`:{let{additions:e=[],deletions:t=[]}=o,n=e.find(e=>[A.appConfig,A.appConfigV4].includes(e.path));n&&$(n?.parsed),t.find(e=>[A.appConfig,A.appConfigV4].includes(e.path))&&$(void 0)}}async function c(e){if(!e)return;let{collection:t}=X(j(e),Z);if(!t){console.warn(`Content Preview: collection not found for file: ${e}, skipping navigation.`);return}if(t.type!==`page`)return;let i=T(t.name),a=N(e),o=Ht(t,`stem`,a),s=await i.first(o);if(!s||!s.path)return;let c=n.resolve(s.path);!c||!c.matched||c.matched.length===0||s.path!==r.path&&n.push(s.path)}async function l(e,t){let{collection:i,matchedSource:a}=X(e.path,Z);if(!i||!a){console.warn(`Content Preview: collection not found for file: ${e.path}, skipping update.`);return}let o=N(e.path),s=Ee({path:e.path,parsed:e.parsed},i,a),c=Bt(i,o,s);if(await T(i.name).exec(c),i.type!==`page`||!e.pathRoute)return;let l=v(e.pathRoute);if(t&&l!==r.path){let e=n.resolve(l);if(!e||!e.matched||e.matched.length===0)return;n.push(l)}}async function u(e){let{collection:t}=X(j(e),Z);if(!t){console.warn(`Content Preview: collection not found for file: ${e}, skipping deletion.`);return}let n=N(e),r=Vt(t,n);await T(t.name).exec(r)}});async function i(){if(!Q.value)return;let e=r.path,{collection:t}=Rt(e,Z);if(!t||t.type!==`page`){window.sendNavigateMessageInPreview(e,!1);return}let n=T(t.name),i=Ht(t,`path`,e),a=await n.first(i);window.sendNavigateMessageInPreview(e,!!a?.path)}e.hook(`page:finish`,()=>{i()}),e.hook(`nuxt-content:preview:ready`,()=>{window.parent.postMessage({type:`nuxt-content:preview:ready`},`*`)}),window.sendNavigateMessageInPreview=(e,t)=>{window.parent.postMessage({type:`nuxt-content:preview:navigate`,payload:{path:e,navigate:t}},`*`)}}async function Xt(){await _().hooks.callHookParallel(`app:data:refresh`)}export{Yt as initIframeCommunication,Jt as mountPreviewUI};
//# sourceMappingURL=BaUHGsHu.js.map